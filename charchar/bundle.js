function setupEnvForTypeWriter(t){var e=t.Element,s=t.document;!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.typewriterStandalone=t()}}(function(){return function t(e,s,i){function r(o,a){if(!s[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(n)return n(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=s[o]={exports:{}};e[o][0].call(u.exports,function(t){var s=e[o][1][t];return r(s?s:t)},u,u.exports,t,e,s,i)}return s[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,s){function i(t,e){return p.isUndefined(e)?""+e:p.isNumber(e)&&!isFinite(e)?e.toString():p.isFunction(e)||p.isRegExp(e)?e.toString():e}function r(t,e){return p.isString(t)?t.length<e?t:t.slice(0,e):t}function n(t){return r(JSON.stringify(t.actual,i),128)+" "+t.operator+" "+r(JSON.stringify(t.expected,i),128)}function o(t,e,s,i,r){throw new m.AssertionError({message:s,actual:t,expected:e,operator:i,stackStartFunction:r})}function a(t,e){t||o(t,!0,e,"==",m.ok)}function h(t,e){if(t===e)return!0;if(p.isBuffer(t)&&p.isBuffer(e)){if(t.length!=e.length)return!1;for(var s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}return p.isDate(t)&&p.isDate(e)?t.getTime()===e.getTime():p.isRegExp(t)&&p.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:p.isObject(t)||p.isObject(e)?u(t,e):t==e}function c(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function u(t,e){if(p.isNullOrUndefined(t)||p.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(p.isPrimitive(t)||p.isPrimitive(e))return t===e;var s=c(t),i=c(e);if(s&&!i||!s&&i)return!1;if(s)return t=d.call(t),e=d.call(e),h(t,e);var r,n,o=b(t),a=b(e);if(o.length!=a.length)return!1;for(o.sort(),a.sort(),n=o.length-1;n>=0;n--)if(o[n]!=a[n])return!1;for(n=o.length-1;n>=0;n--)if(r=o[n],!h(t[r],e[r]))return!1;return!0}function l(t,e){return!(!t||!e)&&("[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e||e.call({},t)===!0)}function f(t,e,s,i){var r;p.isString(s)&&(i=s,s=null);try{e()}catch(n){r=n}if(i=(s&&s.name?" ("+s.name+").":".")+(i?" "+i:"."),t&&!r&&o(r,s,"Missing expected exception"+i),!t&&l(r,s)&&o(r,s,"Got unwanted exception"+i),t&&r&&s&&!l(r,s)||!t&&r)throw r}var p=t("util/"),d=Array.prototype.slice,y=Object.prototype.hasOwnProperty,m=e.exports=a;m.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=n(this),this.generatedMessage=!0);var e=t.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var s=new Error;if(s.stack){var i=s.stack,r=e.name,a=i.indexOf("\n"+r);if(a>=0){var h=i.indexOf("\n",a+1);i=i.substring(h+1)}this.stack=i}}},p.inherits(m.AssertionError,Error),m.fail=o,m.ok=a,m.equal=function(t,e,s){t!=e&&o(t,e,s,"==",m.equal)},m.notEqual=function(t,e,s){t==e&&o(t,e,s,"!=",m.notEqual)},m.deepEqual=function(t,e,s){h(t,e)||o(t,e,s,"deepEqual",m.deepEqual)},m.notDeepEqual=function(t,e,s){h(t,e)&&o(t,e,s,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(t,e,s){t!==e&&o(t,e,s,"===",m.strictEqual)},m.notStrictEqual=function(t,e,s){t===e&&o(t,e,s,"!==",m.notStrictEqual)},m["throws"]=function(t,e,s){f.apply(this,[!0].concat(d.call(arguments)))},m.doesNotThrow=function(t,e){f.apply(this,[!1].concat(d.call(arguments)))},m.ifError=function(t){if(t)throw t};var b=Object.keys||function(t){var e=[];for(var s in t)y.call(t,s)&&e.push(s);return e}},{"util/":12}],2:[function(t,e,s){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var s=function(){};s.prototype=e.prototype,t.prototype=new s,t.prototype.constructor=t}},{}],3:[function(t,e,s){function i(){f&&u&&(f=!1,u.length?l=u.concat(l):p=-1,l.length&&r())}function r(){if(!f){var t=a(i);f=!0;for(var e=l.length;e;){for(u=l,l=[];++p<e;)u&&u[p].run();p=-1,e=l.length}u=null,f=!1,h(t)}}function n(t,e){this.fun=t,this.array=e}function o(){}var a,h,c=e.exports={};!function(){try{a=setTimeout}catch(t){a=function(){throw new Error("setTimeout is not defined")}}try{h=clearTimeout}catch(t){h=function(){throw new Error("clearTimeout is not defined")}}}();var u,l=[],f=!1,p=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];l.push(new n(t,e)),1!==l.length||f||a(r,0)},n.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=o,c.addListener=o,c.once=o,c.off=o,c.removeListener=o,c.removeAllListeners=o,c.emit=o,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],4:[function(t,e,s){(function(){var s,i;i=t("./random"),s=function(t,e,s,r){var n,o,a;return n=-1,a=-1,o=!1,{next:function(){var h;if(n>=r.length-1){if(a===-1)return null;o=!0}return o?n>=a?(n--,"\b"):(o=!1,a=-1,r.charAt(++n)):(n++,o=a!==-1&&n%s===0,i.integerInRange(0,100)>e?(h=t.getAdjacentCharacter(r.charAt(n)),null==h?r.charAt(n):(a===-1&&(a=n,o=1===i.integerInRange(0,1)),h)):r.charAt(n))}}},e.exports=s}).call(this)},{"./random":7}],5:[function(t,e,s){(function(){var s,i,r,n;n=t("./random"),r=[["`","1","2","3","4","5","6","7","8","9","0","-","="],["","Q","W","E","R","T","Y","U","I","O","P","[","]","\\"],["","A","S","D","F","G","H","J","K","L",";","'"],["","Z","X","C","V","B","N","M",",",".","/"]],i=function(t){return t===t.toLowerCase()},s=function(t){var e,o,a,h,c,u,l,f,p,d;for(d=c=0,f=r.length;c<f;d=c+=1)for(h=u=0,p=r[d].length;u<p;h=u+=1)if(r[d][h].toLowerCase()===t.toLowerCase())return l=n.integerInRange(-1,1),a=d+l,(a>=r.length||a<0)&&(a+=-2*l),h>=r[a].length&&(h=r[a].length-1),l=0===l?[-1,1][n.integerInRange(0,1)]:n.integerInRange(-1,1),o=h+l,(o>=r[a].length||o<0)&&(o+=-2*l),e=r[a][o],""===e?s(t):i(t)?e.toLowerCase():e;return null},e.exports.getAdjacentCharacter=s}).call(this)},{"./random":7}],6:[function(t,e,s){(function(){var s,i,r;r=t("assert"),i=t("./sequence"),s=function(){function t(t){this.onWait=t,this._sequences=[],this._waiting=!0,"function"==typeof this.onWait&&this.onWait()}return t.prototype._next=function(){var t,e,s,i,r;for(r=null,s=this._sequences,t=0,e=s.length;t<e;t++)if(i=s[t],null!=i){if(i.empty())continue;r=i;break}return null!=r?r.next(this._next.bind(this)):(this._sequences=[],this._waiting=!0,"function"==typeof this.onWait?this.onWait():void 0)},t.prototype.then=function(t,e){if(r.ok(null!=t,"The priority must be specified"),r.strictEqual(typeof t,"number","Priority must be a number"),r.strictEqual(~~t,t,"Priority must be an integer"),r.ok(t>=0,"Priority must be a positive integer"),r.ok(null!=e,"The function must be specified"),null==this._sequences[t]&&(this._sequences[t]=new i),this._sequences[t].add(e),this._waiting)return this._waiting=!1,this._next()},t}(),e.exports=s}).call(this)},{"./sequence":8,assert:1}],7:[function(t,e,s){(function(){var s,i;s=t("assert"),i=function(t,e){return s.ok(null!=t,"The minimum must be specified"),s.strictEqual(typeof t,"number","Min must be a Number"),s.strictEqual(~~t,t,"Min must be an integer"),s.ok(null!=e,"The maximum must be specified"),s.strictEqual(typeof e,"number","Max must be a Number"),s.strictEqual(~~e,e,"Max must be an integer"),s.strictEqual(t<=e,!0,"Min must be less than or equal to Max"),t===e?t:Math.floor(Math.random()*(e-t+1))+t},e.exports.integerInRange=i}).call(this)},{assert:1}],8:[function(t,e,s){(function(){var s,i;i=t("assert"),s=function(){function t(){this._queue=[]}return t.prototype.next=function(t){var e;if(!this.empty())return(e=this._queue.shift())(t)},t.prototype.add=function(t){return i.ok(null!=t,"The function must be specified"),this._queue.push(t)},t.prototype.empty=function(){return 0===this._queue.length},t}(),e.exports=s}).call(this)},{assert:1}],9:[function(t,i,r){(function(r){(function(){var n,o,a,h,c;a=t("assert"),n=t("./prioritysequence"),c=t("./random"),h=t("./charactergenerator"),o=function(){function t(){this._prioritySequence=new n(function(t){return function(){return t._sequenceLevel=0}}(this))}return t.prototype.setTargetDomElement=function(t){return a.ok(t instanceof e,"TargetDomElement must be an instance of Element"),this.targetDomElement=t},t.prototype.setAccuracy=function(t){return a.strictEqual(typeof t,"number","Accuracy must be a number"),a.ok(t>0&&t<=100,"Accuracy must be greater than 0 and less than or equal to 100"),this.accuracy=t},t.prototype.setMinimumSpeed=function(t){return a.strictEqual(typeof t,"number","MinimumSpeed must be a number"),a.ok(t>0,"MinimumSpeed must be greater than 0"),null!=this.maximumSpeed&&t>this.maximumSpeed?this.minimumSpeed=this.maximumSpeed:this.minimumSpeed=t},t.prototype.setMaximumSpeed=function(t){return a.strictEqual(typeof t,"number","MaximumSpeed must be a number"),a.ok(t>0,"MaximumSpeed must be greater than 0"),null!=this.minimumSpeed&&this.minimumSpeed>t?this.maximumSpeed=minimumSpeed:this.maximumSpeed=t},t.prototype.setKeyboardLayout=function(t){return a.strictEqual(typeof t.getAdjacentCharacter,"function","KeyboardLayout must have an exported getAdjacentCharacter method"),this.keyboardLayout=t},t.prototype._makeChainable=function(t,e){var s;if(s=Object.create(this),s._sequenceLevel=this._sequenceLevel,this._prioritySequence.then(this._sequenceLevel,function(i){return r.nextTick(function(){return e(function(){return null!=t&&t.call(s),i()})})}),null!=t&&this._sequenceLevel++,null==t||this.hasOwnProperty("_prioritySequence"))return this},t.prototype.clear=function(t){return this._makeChainable(t,function(t){return function(e){for(var s;null!=(s=t.targetDomElement.lastChild);)t.targetDomElement.removeChild(s);return e()}}(this))},t.prototype.waitRange=function(t,e,s){return this._makeChainable(s,function(s){return function(s){return setTimeout(s,c.integerInRange(t,e))}}(this))},t.prototype.wait=function(t,e){return this.waitRange(t,t,e)},t.prototype.put=function(t,e){return this._makeChainable(e,function(e){return function(i){var r,n;for(n=s.createElement("div"),n.innerHTML=t;null!=(r=n.firstChild);)e.targetDomElement.appendChild(r);return i()}}(this))},t.prototype["delete"]=function(t){return this._makeChainable(t,function(t){return function(e){return t.targetDomElement.removeChild(t.targetDomElement.lastChild),e()}}(this))},t.prototype.type=function(t,e){var s,i,r;for(i=(this.minimumSpeed+this.maximumSpeed)/2,r=h(this.keyboardLayout,this.accuracy,i,t);null!==(s=r.next());)"\b"!==s?this.put(s):this["delete"](),this.waitRange(~~(1e3/this.maximumSpeed),~~(1e3/this.minimumSpeed));return this.wait(0,e)},t}(),i.exports=o}).call(this)}).call(this,t("_process"))},{"./charactergenerator":4,"./prioritysequence":6,"./random":7,_process:3,assert:1}],10:[function(t,e,s){(function(){var s,i,r;r=t("assert"),s=t("./typewriter"),i=function(e){var i;return i=new s,i.setTargetDomElement(e),{withAccuracy:function(t){return this.accuracy=t,i.setAccuracy(this.accuracy),this},withMinimumSpeed:function(t){return this.minimumSpeed=t,i.setMinimumSpeed(this.minimumSpeed),this},withMaximumSpeed:function(t){return this.maximumSpeed=t,i.setMaximumSpeed(this.maximumSpeed),this},withKeyboardLayout:function(t){return this.keyboardLayout=t,i.setKeyboardLayout(this.keyboardLayout),this},build:function(){return r.ok(null!=this.accuracy,"Accuracy must be set"),r.ok(null!=this.minimumSpeed,"MinimumSpeed must be set"),r.ok(null!=this.maximumSpeed,"MaximumSpeed must be set"),null==this.keyboardLayout&&i.setKeyboardLayout(t("./defaultkeyboardlayout")),i}}},e.exports=i}).call(this)},{"./defaultkeyboardlayout":5,"./typewriter":9,assert:1}],11:[function(t,e,s){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],12:[function(t,e,s){(function(e,i){function r(t,e){var i={seen:[],stylize:o};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),y(e)?i.showHidden=e:e&&s._extend(i,e),k(i.showHidden)&&(i.showHidden=!1),k(i.depth)&&(i.depth=2),k(i.colors)&&(i.colors=!1),k(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=n),h(i,t,i.depth)}function n(t,e){var s=r.styles[e];return s?"["+r.colors[s][0]+"m"+t+"["+r.colors[s][1]+"m":t}function o(t,e){return t}function a(t){var e={};return t.forEach(function(t,s){e[t]=!0}),e}function h(t,e,i){if(t.customInspect&&e&&S(e.inspect)&&e.inspect!==s.inspect&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(i,t);return g(r)||(r=h(t,r,i)),r}var n=c(t,e);if(n)return n;var o=Object.keys(e),y=a(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),C(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return u(e);if(0===o.length){if(S(e)){var m=e.name?": "+e.name:"";return t.stylize("[Function"+m+"]","special")}if(w(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(E(e))return t.stylize(Date.prototype.toString.call(e),"date");if(C(e))return u(e)}var b="",v=!1,x=["{","}"];if(d(e)&&(v=!0,x=["[","]"]),S(e)){var k=e.name?": "+e.name:"";b=" [Function"+k+"]"}if(w(e)&&(b=" "+RegExp.prototype.toString.call(e)),E(e)&&(b=" "+Date.prototype.toUTCString.call(e)),C(e)&&(b=" "+u(e)),0===o.length&&(!v||0==e.length))return x[0]+b+x[1];if(i<0)return w(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var _;return _=v?l(t,e,i,y,o):o.map(function(s){return f(t,e,i,y,s,v)}),t.seen.pop(),p(_,b,x)}function c(t,e){if(k(e))return t.stylize("undefined","undefined");if(g(e)){var s="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(s,"string")}return v(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,s,i,r){for(var n=[],o=0,a=e.length;o<a;++o)T(e,String(o))?n.push(f(t,e,s,i,String(o),!0)):n.push("");return r.forEach(function(r){r.match(/^\d+$/)||n.push(f(t,e,s,i,r,!0))}),n}function f(t,e,s,i,r,n){var o,a,c;if(c=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),T(i,r)||(o="["+r+"]"),a||(t.seen.indexOf(c.value)<0?(a=m(s)?h(t,c.value,null):h(t,c.value,s-1),a.indexOf("\n")>-1&&(a=n?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),k(o)){if(n&&r.match(/^\d+$/))return a;o=JSON.stringify(""+r),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function p(t,e,s){var i=0,r=t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?s[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+s[1]:s[0]+e+" "+t.join(", ")+" "+s[1]}function d(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function m(t){return null===t}function b(t){return null==t}function v(t){return"number"==typeof t}function g(t){return"string"==typeof t}function x(t){return"symbol"==typeof t}function k(t){return void 0===t}function w(t){return _(t)&&"[object RegExp]"===A(t)}function _(t){return"object"==typeof t&&null!==t}function E(t){return _(t)&&"[object Date]"===A(t)}function C(t){return _(t)&&("[object Error]"===A(t)||t instanceof Error)}function S(t){return"function"==typeof t}function M(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function A(t){return Object.prototype.toString.call(t)}function O(t){return t<10?"0"+t.toString(10):t.toString(10)}function L(){var t=new Date,e=[O(t.getHours()),O(t.getMinutes()),O(t.getSeconds())].join(":");return[t.getDate(),R[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var D=/%[sdj%]/g;s.format=function(t){if(!g(t)){for(var e=[],s=0;s<arguments.length;s++)e.push(r(arguments[s]));return e.join(" ")}for(var s=1,i=arguments,n=i.length,o=String(t).replace(D,function(t){if("%%"===t)return"%";if(s>=n)return t;switch(t){case"%s":return String(i[s++]);case"%d":return Number(i[s++]);case"%j":try{return JSON.stringify(i[s++])}catch(e){return"[Circular]"}default:return t}}),a=i[s];s<n;a=i[++s])o+=m(a)||!_(a)?" "+a:" "+r(a);return o},s.deprecate=function(t,r){function n(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return t.apply(this,arguments)}if(k(i.process))return function(){return s.deprecate(t,r).apply(this,arguments)};if(e.noDeprecation===!0)return t;var o=!1;return n};var P,B={};s.debuglog=function(t){if(k(P)&&(P=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!B[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var i=e.pid;B[t]=function(){var e=s.format.apply(s,arguments);console.error("%s %d: %s",t,i,e)}}else B[t]=function(){};return B[t]},s.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},s.isArray=d,s.isBoolean=y,s.isNull=m,s.isNullOrUndefined=b,s.isNumber=v,s.isString=g,s.isSymbol=x,s.isUndefined=k,s.isRegExp=w,s.isObject=_,s.isDate=E,s.isError=C,s.isFunction=S,s.isPrimitive=M,s.isBuffer=t("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];s.log=function(){console.log("%s - %s",L(),s.format.apply(s,arguments))},s.inherits=t("inherits"),s._extend=function(t,e){if(!e||!_(e))return t;for(var s=Object.keys(e),i=s.length;i--;)t[s[i]]=e[s[i]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":11,_process:3,inherits:2}]},{},[10])(10)})}(function(){"use strict";function t(){this._events=this._events||{}}function e(){t.call(this)}function s(t){var i=this;if(!(this instanceof s))return new s(arguments[0],arguments[1],arguments[2]);e.call(this),"number"==typeof t&&(t={cols:arguments[0],rows:arguments[1],handler:arguments[2]}),t=t||{},f(p(s.defaults),function(e){null==t[e]&&(t[e]=s.options[e],s[e]!==s.defaults[e]&&(t[e]=s[e])),i[e]=t[e]}),8===t.colors.length?t.colors=t.colors.concat(s._colors.slice(8)):16===t.colors.length?t.colors=t.colors.concat(s._colors.slice(16)):10===t.colors.length?t.colors=t.colors.slice(0,-2).concat(s._colors.slice(8,-2),t.colors.slice(-2)):18===t.colors.length&&(t.colors=t.colors.slice(0,-2).concat(s._colors.slice(16,-2),t.colors.slice(-2))),this.colors=t.colors,this.options=t,this.parent=t.body||t.parent||(d?d.getElementsByTagName("body")[0]:null),this.cols=t.cols||t.geometry[0],this.rows=t.rows||t.geometry[1],this.setRawMode,this.isTTY=!0,this.isRaw=!0,this.columns=this.cols,this.rows=this.rows,t.handler&&this.on("data",t.handler),this.ybase=0,this.ydisp=0,this.x=0,this.y=0,this.cursorState=0,this.cursorHidden=!1,this.convertEol,this.state=0,this.queue="",this.scrollTop=0,this.scrollBottom=this.rows-1,this.applicationKeypad=!1,this.applicationCursor=!1,this.originMode=!1,this.insertMode=!1,this.wraparoundMode=!1,this.normal=null,this.prefixMode=!1,this.selectMode=!1,this.visualMode=!1,this.searchMode=!1,this.searchDown,this.entry="",this.entryPrefix="Search: ",this._real,this._selected,this._textarea,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.decLocator,this.x10Mouse,this.vt200Mouse,this.vt300Mouse,this.normalMouse,this.mouseEvents,this.sendFocus,this.utfMouse,this.sgrMouse,this.urxvtMouse,this.element,this.children,this.refreshStart,this.refreshEnd,this.savedX,this.savedY,this.savedCols,this.readable=!0,this.writable=!0,this.defAttr=131840,this.curAttr=this.defAttr,this.params=[],this.currentParam=0,this.prefix="",this.postfix="",this.lines=[];for(var r=this.rows;r--;)this.lines.push(this.blankLine());this.tabs,this.setupStops()}function i(){var t=d.querySelector(".indicator"),e="#225522";t.style.backgroundColor="lightgreen",C(function(){t.style.backgroundColor=e},100)}function r(t,e,s,i){t.addEventListener(e,s,i||!1)}function n(t,e,s,i){t.removeEventListener(e,s,i||!1)}function o(t){return t.preventDefault&&t.preventDefault(),t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,!1}function a(t,e){function s(){this.constructor=t}s.prototype=e.prototype,t.prototype=new s}function h(t){var e=t.getElementsByTagName("body")[0],s=t.createElement("div");s.className="terminal";var i=t.createElement("div"),r=t.createElement("span");r.innerHTML="hello world",i.appendChild(r),s.appendChild(i),e.appendChild(s);var n=r.scrollWidth;r.style.fontWeight="bold";var o=r.scrollWidth;return e.removeChild(s),n!==o}function c(t,e){for(var s=t.length;s--;)if(t[s]===e)return s;return-1}function u(t){return!(t<="＀")&&(t>="！"&&t<="ﾾ"||t>="ￂ"&&t<="ￇ"||t>="ￊ"&&t<="ￏ"||t>="ￒ"&&t<="ￗ"||t>="ￚ"&&t<="ￜ"||t>="￠"&&t<="￦"||t>="￨"&&t<="￮")}function l(t,e,i){var r=t<<16|e<<8|i;if(null!=l._cache[r])return l._cache[r];for(var n,o,a,h,c,u=1/0,f=-1,p=0;p<s.vcolors.length;p++){if(n=s.vcolors[p],o=n[0],a=n[1],h=n[2],c=l.distance(t,e,i,o,a,h),0===c){f=p;break}c<u&&(u=c,f=p)}return l._cache[r]=f}function f(t,e,s){if(t.forEach)return t.forEach(e,s);for(var i=0;i<t.length;i++)e.call(s,t[i],i,t)}function p(t){if(Object.keys)return Object.keys(t);var e,s=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.push(e);return s}var d=this.document;t.prototype.addListener=function(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)},t.prototype.on=t.prototype.addListener,t.prototype.removeListener=function(t,e){if(this._events[t])for(var s=this._events[t],i=s.length;i--;)if(s[i]===e||s[i].listener===e)return void s.splice(i,1)},t.prototype.off=t.prototype.removeListener,t.prototype.removeAllListeners=function(t){this._events[t]&&delete this._events[t]},t.prototype.once=function(t,e){function s(){var i=Array.prototype.slice.call(arguments);return this.removeListener(t,s),e.apply(this,i)}return s.listener=e,this.on(t,s)},t.prototype.emit=function(t){if(this._events[t])for(var e=Array.prototype.slice.call(arguments,1),s=this._events[t],i=s.length,r=0;r<i;r++)s[r].apply(this,e)},t.prototype.listeners=function(t){return this._events[t]=this._events[t]||[]},a(e,t),e.prototype.pipe=function(t,e){function s(){o.removeListener("data",i),o.removeListener("error",r),o.removeListener("end",n),t.removeListener("error",r),t.removeListener("close",s)}var i,r,n,o=this;return o.on("data",i=function(e){t.write(e)}),o.on("error",r=function(t){if(s(),!this.listeners("error").length)throw t}),o.on("end",n=function(){t.end(),s()}),t.on("error",r),t.on("close",s),t.emit("pipe",o),t};var y=0,m=1,b=2,v=3,g=4,x=5,k=6,w=7,_={type:"udk"};a(s,e),s.tangoColors=["#2e3436","#cc0000","#4e9a06","#c4a000","#3465a4","#75507b","#06989a","#d3d7cf","#555753","#ef2929","#8ae234","#fce94f","#729fcf","#ad7fa8","#34e2e2","#eeeeec"],s.xtermColors=["#000000","#cd0000","#00cd00","#cdcd00","#0000ee","#cd00cd","#00cdcd","#e5e5e5","#7f7f7f","#ff0000","#00ff00","#ffff00","#5c5cff","#ff00ff","#00ffff","#ffffff"],s.solarizedColors=["#002b36","#cb4b16","#586e75","#657b83","#839496","#6c71c4","#93a1a1","#fdf6e3","#073642","#dc322f","#859900","#b58900","#268bd2","#d336b8","#2aa198","#eee8d5"],s.colors=function(){function t(t,s,i){r.push("#"+e(t)+e(s)+e(i))}function e(t){return t=t.toString(16),t.length<2?"0"+t:t}var i,r=s.tangoColors.slice(),n=[0,95,135,175,215,255];for(i=0;i<216;i++)t(n[i/36%6|0],n[i/6%6|0],n[i%6]);for(i=0;i<24;i++)n=8+10*i,t(n,n,n);return r}(),s.colors[256]="#002b36",s.colors[257]="#657b83",s._colors=s.colors.slice(),s.vcolors=function(){for(var t,e=[],i=s.colors,r=0;r<256;r++)t=parseInt(i[r].substring(1),16),e.push([t>>16&255,t>>8&255,255&t]);return e}(),s.defaults={colors:s.solarizedColors,convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!0,visualBell:!1,popOnBell:!1,scrollback:1e3,screenKeys:!1,debug:!1,useStyle:!1},s.options={},f(p(s.defaults),function(t){s[t]=s.defaults[t],s.options[t]=s.defaults[t]}),s.focus=null,s.prototype.focus=function(){s.focus!==this&&(s.focus&&s.focus.blur(),this.sendFocus&&this.send("[I"),this.showCursor(),s.focus=this)},s.prototype.blur=function(){s.focus===this&&(this.cursorState=0,this.refresh(this.y,this.y),this.sendFocus&&this.send("[O"),s.focus=null)},s.prototype.initGlobal=function(){var t=this.document;s._boundDocs=s._boundDocs||[],~c(s._boundDocs,t)||(s._boundDocs.push(t),s.bindPaste(t),s.bindKeys(t),s.bindCopy(t),this.isMobile&&this.fixMobile(t),this.useStyle&&s.insertStyle(t,this.colors[256],this.colors[257]))},s.bindPaste=function(t){var e=t.defaultView;r(e,"paste",function(t){var e=s.focus;if(e)return t.clipboardData?e.send(t.clipboardData.getData("text/plain")):e.context.clipboardData&&e.send(e.context.clipboardData.getData("Text")),e.element.contentEditable="inherit",o(t)})},s.bindKeys=function(t){r(t,"keydown",function(t){if(s.focus){var e=t.target||t.srcElement;if(e)return e===s.focus.element||e===s.focus.context||e===s.focus.document||e===s.focus.body||e===s._textarea||e===s.focus.parent?s.focus.keyDown(t):void 0}},!0),r(t,"keypress",function(t){if(s.focus){var e=t.target||t.srcElement;if(e)return e===s.focus.element||e===s.focus.context||e===s.focus.document||e===s.focus.body||e===s._textarea||e===s.focus.parent?s.focus.keyPress(t):void 0}},!0),r(t,"mousedown",function(t){if(s.focus){var e=t.target||t.srcElement;if(e){do if(e===s.focus.element)return;while(e=e.parentNode);s.focus.blur()}}})},s.bindCopy=function(t){var e=t.defaultView;r(e,"copy",function(t){var e=s.focus;if(e&&e._selected){var i=e.getCopyTextarea(),r=e.grabText(e._selected.x1,e._selected.x2,e._selected.y1,e._selected.y2);e.emit("copy",r),i.focus(),i.textContent=r,i.value=r,i.setSelectionRange(0,r.length),C(function(){e.element.focus(),e.focus()},1)}})},s.prototype.fixMobile=function(t){var e=this,i=t.createElement("textarea");i.style.position="absolute",i.style.left="-32000px",i.style.top="-32000px",i.style.width="0px",i.style.height="0px",i.style.opacity="0",i.style.backgroundColor="transparent",i.style.borderStyle="none",i.style.outlineStyle="none",i.autocapitalize="none",i.autocorrect="off",t.getElementsByTagName("body")[0].appendChild(i),s._textarea=i,C(function(){i.focus()},1e3),this.isAndroid&&r(i,"change",function(){var t=i.textContent||i.value;i.value="",i.textContent="",e.send(t+"\r")})},s.insertStyle=function(t,e,s){var i=t.getElementById("term-style");if(!i){var r=t.getElementsByTagName("head")[0];if(r){var i=t.createElement("style");i.id="term-style",i.innerHTML=".terminal {\n  border: "+e+' solid 5px;\n  font-family: "DejaVu Sans Mono", "Liberation Mono", monospace;\n  font-size: 11px;\n  color: '+s+";\n  background: "+e+";\n}\n\n.terminal-cursor {\n  color: "+e+";\n  background: "+s+";\n}\n",r.insertBefore(i,r.firstChild)}}},s.prototype.open=function(t){var e,i=this,n=0;if(this.parent=t||this.parent,!this.parent)throw new Error("Terminal requires a parent element.");for(this.context=this.parent.ownerDocument.defaultView,this.document=this.parent.ownerDocument,this.body=this.document.getElementsByTagName("body")[0],this.context.navigator&&this.context.navigator.userAgent&&(this.isMac=!!~this.context.navigator.userAgent.indexOf("Mac"),this.isIpad=!!~this.context.navigator.userAgent.indexOf("iPad"),this.isIphone=!!~this.context.navigator.userAgent.indexOf("iPhone"),this.isAndroid=!!~this.context.navigator.userAgent.indexOf("Android"),this.isMobile=this.isIpad||this.isIphone||this.isAndroid,this.isMSIE=!!~this.context.navigator.userAgent.indexOf("MSIE")),this.element=this.document.createElement("div"),this.element.className="terminal charchar-terminal",this.element.style.outline="none",this.element.setAttribute("tabindex",0),this.element.setAttribute("spellcheck","false"),this.element.style.backgroundColor=this.colors[256],this.element.style.color=this.colors[257],this.children=[];n<this.rows;n++)e=this.document.createElement("div"),this.element.appendChild(e),this.children.push(e);this.parent.appendChild(this.element),this.refresh(0,this.rows-1),"useEvents"in this.options&&!this.options.useEvents||this.initGlobal(),"useFocus"in this.options&&!this.options.useFocus||(this.focus(),this.startBlink(),r(this.element,"focus",function(){i.focus(),i.isMobile&&s._textarea.focus()}),r(this.element,"mousedown",function(){i.focus()}),r(this.element,"mousedown",function(t){var e=null!=t.button?+t.button:null!=t.which?t.which-1:null;i.isMSIE&&(e=1===e?0:4===e?1:e),2===e&&(i.element.contentEditable="true",C(function(){i.element.contentEditable="inherit"},1))},!0)),"useMouse"in this.options&&!this.options.useMouse||this.bindMouse(),"useFocus"in this.options&&!this.options.useFocus||C(function(){i.element.focus()},100),null==s.brokenBold&&(s.brokenBold=h(this.document)),this.emit("open")},s.prototype.setRawMode=function(t){this.isRaw=!!t},s.prototype.bindMouse=function(){function t(t){var e,s;if(e=a(t),s=h(t))switch(i(e,s),t.type){case"mousedown":l=e;break;case"mouseup":l=32;break;case f:}}function e(t){var e,s=l;e=h(t),e&&(s+=32,i(s,e))}function s(t,e){if(u.utfMouse){if(2047===e)return t.push(0);e<127?t.push(e):(e>2047&&(e=2047),t.push(192|e>>6),t.push(128|63&e))}else{if(255===e)return t.push(0);e>127&&(e=127),t.push(e)}}function i(t,e){if(u.vt300Mouse){t&=3,e.x-=32,e.y-=32;var i="[24";if(0===t)i+="1";else if(1===t)i+="3";else if(2===t)i+="5";else{if(3===t)return;i+="0"}return i+="~["+e.x+","+e.y+"]\r",void u.send(i)}if(u.decLocator)return t&=3,e.x-=32,e.y-=32,0===t?t=2:1===t?t=4:2===t?t=6:3===t&&(t=3),void u.send("["+t+";"+(3===t?4:0)+";"+e.y+";"+e.x+";"+(e.page||0)+"&w");if(u.urxvtMouse)return e.x-=32,e.y-=32,e.x++,e.y++,void u.send("["+t+";"+e.x+";"+e.y+"M");if(u.sgrMouse)return e.x-=32,e.y-=32,void u.send("[<"+(3===(3&t)?t&-4:t)+";"+e.x+";"+e.y+(3===(3&t)?"m":"M"));var i=[];s(i,t),s(i,e.x),s(i,e.y),u.send("[M"+E.fromCharCode.apply(E,i))}function a(t){var e,s,i,r,n;switch(t.type){case"mousedown":e=null!=t.button?+t.button:null!=t.which?t.which-1:null,u.isMSIE&&(e=1===e?0:4===e?1:e);break;case"mouseup":e=3;break;case"DOMMouseScroll":e=t.detail<0?64:65;break;case"mousewheel":e=t.wheelDeltaY>0?64:65}return s=t.shiftKey?4:0,i=t.metaKey?8:0,r=t.ctrlKey?16:0,n=s|i|r,u.vt200Mouse?n&=r:u.normalMouse||(n=0),e=32+(n<<2)+e}function h(t){var e,s,i,r,n;if(null!=t.pageX){for(e=t.pageX,s=t.pageY,n=u.element;n&&n!==u.document.documentElement;)e-=n.offsetLeft,s-=n.offsetTop,n="offsetParent"in n?n.offsetParent:n.parentNode;return i=u.element.clientWidth,r=u.element.clientHeight,e=Math.round(e/i*u.cols),s=Math.round(s/r*u.rows),e<0&&(e=0),e>u.cols&&(e=u.cols),s<0&&(s=0),s>u.rows&&(s=u.rows),e+=32,s+=32,{x:e,y:s,type:t.type===f?"mousewheel":t.type}}}var c=this.element,u=this,l=32,f="onmousewheel"in this.context?"mousewheel":"DOMMouseScroll";r(c,"mousedown",function(s){if(u.mouseEvents)return t(s),u.focus(),u.normalMouse&&r(u.document,"mousemove",e),u.x10Mouse||r(u.document,"mouseup",function i(s){return t(s),u.normalMouse&&n(u.document,"mousemove",e),n(u.document,"mouseup",i),o(s)}),o(s)}),r(c,f,function(e){if(u.mouseEvents&&!(u.x10Mouse||u.vt300Mouse||u.decLocator))return t(e),
o(e)}),r(c,f,function(t){if(!u.mouseEvents&&!u.applicationKeypad)return"DOMMouseScroll"===t.type?u.scrollDisp(t.detail<0?-5:5):u.scrollDisp(t.wheelDeltaY>0?-5:5),o(t)})},s.prototype.close=s.prototype.destroySoon=s.prototype.destroy=function(){this.destroyed||(this._blink&&(clearInterval(this._blink),delete this._blink),this.readable=!1,this.writable=!1,this.destroyed=!0,this._events={},this.handler=function(){},this.write=function(){},this.end=function(){},this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.emit("end"),this.emit("close"),this.emit("finish"),this.emit("destroy"))},s.prototype.refresh=function(t,e){var i,r,n,o,a,h,c,l,f,p,d,y,m,b;for(e-t>=this.rows/2&&(b=this.element.parentNode,b&&b.removeChild(this.element)),c=this.cols,r=t,e>=this.lines.length&&(this.log("`end` is too large. Most likely a bad CSR."),e=this.lines.length-1);r<=e;r++){for(m=r+this.ydisp,o=this.lines[m],a="",i=r!==this.y||!this.cursorState||this.ydisp!==this.ybase&&!this.selectMode||this.cursorHidden?-1:this.x,f=this.defAttr,n=0;n<c;n++){switch(l=o[n][0],h=o[n][1],n===i&&(l=-1),l!==f&&(f!==this.defAttr&&(a+="</span>"),l!==this.defAttr&&(l===-1?a+='<span class="reverse-video terminal-cursor">':(a+='<span style="',p=511&l,d=l>>9&511,y=l>>18,1&y&&(s.brokenBold||(a+="font-weight:bold;"),d<8&&(d+=8)),2&y&&(a+="text-decoration:underline;"),4&y&&(2&y?(a=a.slice(0,-1),a+=" blink;"):a+="text-decoration:blink;"),8&y&&(p=l>>9&511,d=511&l,1&y&&d<8&&(d+=8)),16&y&&(a+="visibility:hidden;"),256!==p&&(a+="background-color:"+this.colors[p]+";"),257!==d&&(a+="color:"+this.colors[d]+";"),a+='">'))),h){case"&":a+="&amp;";break;case"<":a+="&lt;";break;case">":a+="&gt;";break;default:h<=" "?a+="&nbsp;":(u(h)&&n++,a+=h)}f=l}f!==this.defAttr&&(a+="</span>"),this.children[r].innerHTML=a}b&&b.appendChild(this.element)},s.prototype._cursorBlink=function(){s.focus===this&&(this.cursorState^=1,this.refresh(this.y,this.y))},s.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))},s.prototype.startBlink=function(){if(this.cursorBlink){var t=this;this._blinker=function(){t._cursorBlink()},this._blink=S(this._blinker,500)}},s.prototype.refreshBlink=function(){this.cursorBlink&&this._blink&&(clearInterval(this._blink),this._blink=S(this._blinker,500))},s.prototype.scroll=function(){var t;++this.ybase===this.scrollback&&(this.ybase=this.ybase/2|0,this.lines=this.lines.slice(-(this.ybase+this.rows)+1)),this.ydisp=this.ybase,t=this.ybase+this.rows-1,t-=this.rows-1-this.scrollBottom,t===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(t,0,this.blankLine()),0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.ydisp=this.ybase),this.lines.splice(this.ybase+this.scrollTop,1)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},s.prototype.scrollDisp=function(t){this.ydisp+=t,this.ydisp>this.ybase?this.ydisp=this.ybase:this.ydisp<0&&(this.ydisp=0),this.refresh(0,this.rows-1)},s.prototype.write=function(t){i();var e,r,n,o=t.length,a=0;for(this.refreshStart=this.y,this.refreshEnd=this.y,this.ybase!==this.ydisp&&(this.ydisp=this.ybase,this.maxRange());a<o;a++,this.lch=n)switch(n=t[a],this.state){case y:switch(n){case"":this.bell();break;case"\n":case"\x0B":case"\f":this.convertEol&&(this.x=0),this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());break;case"\r":this.x=0;break;case"\b":this.x>0&&this.x--;break;case"\t":this.x=this.nextStop();break;case"":this.setgLevel(1);break;case"":this.setgLevel(0);break;case"":this.state=m;break;default:if(n>=" "&&(this.charset&&this.charset[n]&&(n=this.charset[n]),this.x>=this.cols&&(this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll())),this.lines[this.y+this.ybase][this.x]=[this.curAttr,n],this.x++,this.updateRange(this.y),u(n))){if(e=this.y+this.ybase,this.cols<2||this.x>=this.cols){this.lines[e][this.x-1]=[this.curAttr," "];break}this.lines[e][this.x]=[this.curAttr," "],this.x++}}break;case m:switch(n){case"[":this.params=[],this.currentParam=0,this.state=b;break;case"]":this.params=[],this.currentParam=0,this.state=v;break;case"P":this.params=[],this.prefix="",this.currentParam="",this.state=x;break;case"_":this.state=k;break;case"^":this.state=w;break;case"c":this.reset();break;case"E":this.x=0;case"D":this.index();break;case"M":this.reverseIndex();break;case"%":this.setgLevel(0),this.setgCharset(0,s.charsets.US),this.state=y,a++;break;case"(":case")":case"*":case"+":case"-":case".":switch(n){case"(":this.gcharset=0;break;case")":this.gcharset=1;break;case"*":this.gcharset=2;break;case"+":this.gcharset=3;break;case"-":this.gcharset=1;break;case".":this.gcharset=2}this.state=g;break;case"/":this.gcharset=3,this.state=g,a--;break;case"N":break;case"O":break;case"n":this.setgLevel(2);break;case"o":this.setgLevel(3);break;case"|":this.setgLevel(3);break;case"}":this.setgLevel(2);break;case"~":this.setgLevel(1);break;case"7":this.saveCursor(),this.state=y;break;case"8":this.restoreCursor(),this.state=y;break;case"#":this.state=y,a++;break;case"H":this.tabSet();break;case"=":this.log("Serial port requested application keypad."),this.applicationKeypad=!0,this.state=y;break;case">":this.log("Switching back to normal keypad."),this.applicationKeypad=!1,this.state=y;break;default:this.state=y,this.error("Unknown ESC control: %s.",n)}break;case g:switch(n){case"0":r=s.charsets.SCLD;break;case"A":r=s.charsets.UK;break;case"B":r=s.charsets.US;break;case"4":r=s.charsets.Dutch;break;case"C":case"5":r=s.charsets.Finnish;break;case"R":r=s.charsets.French;break;case"Q":r=s.charsets.FrenchCanadian;break;case"K":r=s.charsets.German;break;case"Y":r=s.charsets.Italian;break;case"E":case"6":r=s.charsets.NorwegianDanish;break;case"Z":r=s.charsets.Spanish;break;case"H":case"7":r=s.charsets.Swedish;break;case"=":r=s.charsets.Swiss;break;case"/":r=s.charsets.ISOLatin,a++;break;default:r=s.charsets.US}this.setgCharset(this.gcharset,r),this.gcharset=null,this.state=y;break;case v:if(""===this.lch&&"\\"===n||""===n){switch(""===this.lch&&("string"==typeof this.currentParam?this.currentParam=this.currentParam.slice(0,-1):"number"==typeof this.currentParam&&(this.currentParam=(this.currentParam-("".charCodeAt(0)-48))/10)),this.params.push(this.currentParam),this.params[0]){case 0:case 1:case 2:this.params[1]&&(this.title=this.params[1],this.handleTitle(this.title));break;case 3:break;case 4:case 5:break;case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:break;case 46:break;case 50:break;case 51:break;case 52:break;case 104:case 105:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:}this.params=[],this.currentParam=0,this.state=y}else this.params.length?this.currentParam+=n:n>="0"&&n<="9"?this.currentParam=10*this.currentParam+n.charCodeAt(0)-48:";"===n&&(this.params.push(this.currentParam),this.currentParam="");break;case b:if("?"===n||">"===n||"!"===n){this.prefix=n;break}if(n>="0"&&n<="9"){this.currentParam=10*this.currentParam+n.charCodeAt(0)-48;break}if("$"===n||'"'===n||" "===n||"'"===n){this.postfix=n;break}if(this.params.push(this.currentParam),this.currentParam=0,";"===n)break;switch(this.state=y,n){case"A":this.cursorUp(this.params);break;case"B":this.cursorDown(this.params);break;case"C":this.cursorForward(this.params);break;case"D":this.cursorBackward(this.params);break;case"H":this.cursorPos(this.params);break;case"J":this.eraseInDisplay(this.params);break;case"K":this.eraseInLine(this.params);break;case"m":this.prefix||this.charAttributes(this.params);break;case"n":this.prefix||this.deviceStatus(this.params);break;case"@":this.insertChars(this.params);break;case"E":this.cursorNextLine(this.params);break;case"F":this.cursorPrecedingLine(this.params);break;case"G":this.cursorCharAbsolute(this.params);break;case"L":this.insertLines(this.params);break;case"M":this.deleteLines(this.params);break;case"P":this.deleteChars(this.params);break;case"X":this.eraseChars(this.params);break;case"`":this.charPosAbsolute(this.params);break;case"a":this.HPositionRelative(this.params);break;case"c":this.sendDeviceAttributes(this.params);break;case"d":this.linePosAbsolute(this.params);break;case"e":this.VPositionRelative(this.params);break;case"f":this.HVPosition(this.params);break;case"h":this.setMode(this.params);break;case"l":this.resetMode(this.params);break;case"r":this.setScrollRegion(this.params);break;case"s":this.saveCursor(this.params);break;case"u":this.restoreCursor(this.params);break;case"I":this.cursorForwardTab(this.params);break;case"S":this.scrollUp(this.params);break;case"T":this.params.length<2&&!this.prefix&&this.scrollDown(this.params);break;case"Z":this.cursorBackwardTab(this.params);break;case"b":this.repeatPrecedingCharacter(this.params);break;case"g":this.tabClear(this.params);break;case"p":switch(this.prefix){case"!":this.softReset(this.params)}break;default:this.error("Unknown CSI code: %s.",n)}this.prefix="",this.postfix="";break;case x:if(""===this.lch&&"\\"===n||""===n){if("tmux;"===this.prefix&&""===n){this.currentParam+=n;continue}""===this.lch&&("string"==typeof this.currentParam?this.currentParam=this.currentParam.slice(0,-1):"number"==typeof this.currentParam&&(this.currentParam=(this.currentParam-("".charCodeAt(0)-48))/10)),this.params.push(this.currentParam);var h=this.params[this.params.length-1];switch(this.prefix){case _:this.emit("udk",{clearAll:0===this.params[0],eraseBelow:1===this.params[0],lockKeys:0===this.params[1],dontLockKeys:1===this.params[1],keyList:(this.params[2]+"").split(";").map(function(t){return t=t.split("/"),{keyCode:t[0],hexKeyValue:t[1]}})});break;case"$q":var c=0;switch(h){case'"q':h='0"q',c=1;break;case'"p':h='61;0"p',c=1;break;case"r":h=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+"r",c=1;break;case"m":c=0;break;default:this.error("Unknown DCS Pt: %s.",h),c=0}this.send("P"+c+"$r"+h+"\\");break;case"+p":this.emit("set terminfo",{name:this.params[0]});break;case"+q":var c=!1;this.send("P"+ +c+"+r"+h+"\\");break;case"tmux;":this.emit("passthrough",h);break;default:this.error("Unknown DCS prefix: %s.",h)}this.currentParam=0,this.prefix="",this.state=y}else this.currentParam+=n,this.prefix||(/^\d*;\d*\|/.test(this.currentParam)?(this.prefix=_,this.params=this.currentParam.split(/[;|]/).map(function(t){return t.length?+t:0}).slice(0,-1),this.currentParam=""):(/^[$+][a-zA-Z]/.test(this.currentParam)||/^\w+;\x1b/.test(this.currentParam))&&(this.prefix=this.currentParam,this.currentParam=""));break;case w:if(""===this.lch&&"\\"===n||""===n){this.state=y;break}case k:(""===this.lch&&"\\"===n||""===n)&&(this.state=y)}return this.updateRange(this.y),this.refresh(this.refreshStart,this.refreshEnd),!0},s.prototype.writeln=function(t){return this.write(t+"\r\n")},s.prototype.end=function(t){var e=!0;return t&&(e=this.write(t)),this.destroySoon(),e},s.prototype.resume=function(){},s.prototype.pause=function(){},s.prototype.keyDown=function(t){var e,s=this;switch(t.keyCode){case 8:if(t.altKey){e="";break}if(t.shiftKey){e="\b";break}e="";break;case 9:if(t.shiftKey){e="[Z";break}e="\t";break;case 13:e="\r";break;case 27:e="";break;case 32:e=" ";break;case 37:if(this.applicationCursor){e="OD";break}if(t.ctrlKey){e="[5D";break}e="[D";break;case 39:if(this.applicationCursor){e="OC";break}if(t.ctrlKey){e="[5C";break}e="[C";break;case 38:if(this.applicationCursor){e="OA";break}if(t.ctrlKey)return this.scrollDisp(-1),o(t);e="[A";break;case 40:if(this.applicationCursor){e="OB";break}if(t.ctrlKey)return this.scrollDisp(1),o(t);e="[B";break;case 46:e="[3~";break;case 45:e="[2~";break;case 36:if(this.applicationKeypad){e="OH";break}e="OH";break;case 35:if(this.applicationKeypad){e="OF";break}e="OF";break;case 33:if(t.shiftKey)return this.scrollDisp(-(this.rows-1)),o(t);e="[5~";break;case 34:if(t.shiftKey)return this.scrollDisp(this.rows-1),o(t);e="[6~";break;case 112:e="OP";break;case 113:e="OQ";break;case 114:e="OR";break;case 115:e="OS";break;case 116:e="[15~";break;case 117:e="[17~";break;case 118:e="[18~";break;case 119:e="[19~";break;case 120:e="[20~";break;case 121:e="[21~";break;case 122:e="[23~";break;case 123:e="[24~";break;default:if(t.ctrlKey)if(t.keyCode>=65&&t.keyCode<=90){if(this.screenKeys&&!this.prefixMode&&!this.selectMode&&65===t.keyCode)return this.enterPrefix(),o(t);if(this.prefixMode&&86===t.keyCode)return void this.leavePrefix();if((this.prefixMode||this.selectMode)&&67===t.keyCode)return void(this.visualMode&&C(function(){s.leaveVisual()},1));e=E.fromCharCode(t.keyCode-64)}else 32===t.keyCode?e=E.fromCharCode(0):t.keyCode>=51&&t.keyCode<=55?e=E.fromCharCode(t.keyCode-51+27):56===t.keyCode?e=E.fromCharCode(127):219===t.keyCode?e=E.fromCharCode(27):221===t.keyCode&&(e=E.fromCharCode(29));else t.altKey&&(t.keyCode>=65&&t.keyCode<=90?e=""+E.fromCharCode(t.keyCode+32):192===t.keyCode?e="`":t.keyCode>=48&&t.keyCode<=57&&(e=""+(t.keyCode-48)))}return!e||(this.prefixMode?(this.leavePrefix(),o(t)):this.selectMode?(this.keySelect(t,e),o(t)):(this.emit("keydown",t),this.emit("key",e,t),this.showCursor(),this.handler(e),o(t)))},s.prototype.setgLevel=function(t){this.glevel=t,this.charset=this.charsets[t]},s.prototype.setgCharset=function(t,e){this.charsets[t]=e,this.glevel===t&&(this.charset=e)},s.prototype.keyPress=function(t){var e;if(o(t),t.charCode)e=t.charCode;else if(null==t.which)e=t.keyCode;else{if(0===t.which||0===t.charCode)return!1;e=t.which}return!(!e||t.ctrlKey||t.altKey||t.metaKey)&&(e=E.fromCharCode(e),this.prefixMode?(this.leavePrefix(),this.keyPrefix(t,e),!1):this.selectMode?(this.keySelect(t,e),!1):(this.emit("keypress",e,t),this.emit("key",e,t),this.showCursor(),this.handler(e),!1))},s.prototype.send=function(t){var e=this;this.queue||C(function(){e.handler(e.queue),e.queue=""},1),this.queue+=t},s.prototype.bell=function(){if(this.emit("bell"),this.visualBell){var t=this;this.element.style.borderColor="white",C(function(){t.element.style.borderColor=""},10),this.popOnBell&&this.focus()}},s.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var t=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,t)}},s.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var t=Array.prototype.slice.call(arguments);this.context.console.error.apply(this.context.console,t)}},s.prototype.resize=function(t,e){var s,i,r,n,o;if(t<1&&(t=1),e<1&&(e=1),n=this.cols,n<t)for(o=[this.defAttr," "],r=this.lines.length;r--;)for(;this.lines[r].length<t;)this.lines[r].push(o);else if(n>t)for(r=this.lines.length;r--;)for(;this.lines[r].length>t;)this.lines[r].pop();if(this.setupStops(n),this.cols=t,this.columns=t,n=this.rows,n<e)for(i=this.element;n++<e;)this.lines.length<e+this.ybase&&this.lines.push(this.blankLine()),this.children.length<e&&(s=this.document.createElement("div"),i.appendChild(s),this.children.push(s));else if(n>e)for(;n-- >e;)if(this.lines.length>e+this.ybase&&this.lines.pop(),this.children.length>e){if(i=this.children.pop(),!i)continue;i.parentNode.removeChild(i)}this.rows=e,this.y>=e&&(this.y=e-1),this.x>=t&&(this.x=t-1),this.scrollTop=0,this.scrollBottom=e-1,this.refresh(0,this.rows-1),this.normal=null,this.emit("resize")},s.prototype.updateRange=function(t){t<this.refreshStart&&(this.refreshStart=t),t>this.refreshEnd&&(this.refreshEnd=t)},s.prototype.maxRange=function(){this.refreshStart=0,this.refreshEnd=this.rows-1},s.prototype.setupStops=function(t){for(null!=t?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this.cols;t+=8)this.tabs[t]=!0},s.prototype.prevStop=function(t){for(null==t&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this.cols?this.cols-1:t<0?0:t},s.prototype.nextStop=function(t){for(null==t&&(t=this.x);!this.tabs[++t]&&t<this.cols;);return t>=this.cols?this.cols-1:t<0?0:t},s.prototype.eraseAttr=function(){return this.defAttr&-512|511&this.curAttr},s.prototype.eraseRight=function(t,e){for(var s=this.lines[this.ybase+e],i=[this.eraseAttr()," "];t<this.cols;t++)s[t]=i;this.updateRange(e)},s.prototype.eraseLeft=function(t,e){var s=this.lines[this.ybase+e],i=[this.eraseAttr()," "];for(t++;t--;)s[t]=i;this.updateRange(e)},s.prototype.eraseLine=function(t){this.eraseRight(0,t)},s.prototype.blankLine=function(t){for(var e=t?this.eraseAttr():this.defAttr,s=[e," "],i=[],r=0;r<this.cols;r++)i[r]=s;return i},s.prototype.ch=function(t){return t?[this.eraseAttr()," "]:[this.defAttr," "]},s.prototype.is=function(t){var e=this.termName;return 0===(e+"").indexOf(t)},s.prototype.handler=function(t){i(),this.emit("data",t)},s.prototype.handleTitle=function(t){this.emit("title",t)},s.prototype.index=function(){this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll()),this.state=y},s.prototype.reverseIndex=function(){var t;this.y--,this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),t=this.rows-1-this.scrollBottom,this.lines.splice(this.rows-1+this.ybase-t+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)),this.state=y},s.prototype.reset=function(){this.options.rows=this.rows,this.options.cols=this.cols,s.call(this,this.options),this.refresh(0,this.rows-1)},s.prototype.tabSet=function(){this.tabs[this.x]=!0,this.state=y},s.prototype.cursorUp=function(t){var e=t[0];e<1&&(e=1),this.y-=e,this.y<0&&(this.y=0)},s.prototype.cursorDown=function(t){var e=t[0];e<1&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1)},s.prototype.cursorForward=function(t){var e=t[0];e<1&&(e=1),this.x+=e,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.cursorBackward=function(t){var e=t[0];e<1&&(e=1),this.x-=e,this.x<0&&(this.x=0)},s.prototype.cursorPos=function(t){var e,s;e=t[0]-1,s=t.length>=2?t[1]-1:0,e<0?e=0:e>=this.rows&&(e=this.rows-1),s<0?s=0:s>=this.cols&&(s=this.cols-1),this.x=s,this.y=e},s.prototype.eraseInDisplay=function(t){var e;switch(t[0]){case 0:for(this.eraseRight(this.x,this.y),e=this.y+1;e<this.rows;e++)this.eraseLine(e);break;case 1:for(this.eraseLeft(this.x,this.y),e=this.y;e--;)this.eraseLine(e);break;case 2:for(e=this.rows;e--;)this.eraseLine(e);break;case 3:}},s.prototype.eraseInLine=function(t){switch(t[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseLine(this.y)}},s.prototype.charAttributes=function(t){if(1===t.length&&0===t[0])return void(this.curAttr=this.defAttr);for(var e,s=t.length,i=0,r=this.curAttr>>18,n=this.curAttr>>9&511,o=511&this.curAttr;i<s;i++)e=t[i],e>=30&&e<=37?n=e-30:e>=40&&e<=47?o=e-40:e>=90&&e<=97?(e+=8,n=e-90):e>=100&&e<=107?(e+=8,o=e-100):0===e?(r=this.defAttr>>18,n=this.defAttr>>9&511,o=511&this.defAttr):1===e?r|=1:4===e?r|=2:5===e?r|=4:7===e?r|=8:8===e?r|=16:22===e?r&=-2:24===e?r&=-3:25===e?r&=-5:27===e?r&=-9:28===e?r&=-17:39===e?n=this.defAttr>>9&511:49===e?o=511&this.defAttr:38===e?2===t[i+1]?(i+=2,n=l(255&t[i],255&t[i+1],255&t[i+2]),n===-1&&(n=511),i+=2):5===t[i+1]&&(i+=2,e=255&t[i],n=e):48===e?2===t[i+1]?(i+=2,o=l(255&t[i],255&t[i+1],255&t[i+2]),o===-1&&(o=511),i+=2):5===t[i+1]&&(i+=2,e=255&t[i],o=e):100===e?(n=this.defAttr>>9&511,o=511&this.defAttr):this.error("Unknown SGR attribute: %d.",e);this.curAttr=r<<18|n<<9|o},s.prototype.deviceStatus=function(t){if(this.prefix){if("?"===this.prefix)switch(t[0]){case 6:this.send("[?"+(this.y+1)+";"+(this.x+1)+"R");break;case 15:break;case 25:break;case 26:break;case 53:}}else switch(t[0]){case 5:this.send("[0n");break;case 6:this.send("["+(this.y+1)+";"+(this.x+1)+"R")}},s.prototype.insertChars=function(t){var e,s,i,r;for(e=t[0],e<1&&(e=1),s=this.y+this.ybase,i=this.x,r=[this.eraseAttr()," "];e--&&i<this.cols;)this.lines[s].splice(i++,0,r),this.lines[s].pop()},s.prototype.cursorNextLine=function(t){var e=t[0];e<1&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1),this.x=0},s.prototype.cursorPrecedingLine=function(t){var e=t[0];e<1&&(e=1),this.y-=e,this.y<0&&(this.y=0),this.x=0},s.prototype.cursorCharAbsolute=function(t){var e=t[0];e<1&&(e=1),this.x=e-1},s.prototype.insertLines=function(t){var e,s,i;for(e=t[0],e<1&&(e=1),s=this.y+this.ybase,i=this.rows-1-this.scrollBottom,i=this.rows-1+this.ybase-i+1;e--;)this.lines.splice(s,0,this.blankLine(!0)),this.lines.splice(i,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},s.prototype.deleteLines=function(t){var e,s,i;for(e=t[0],e<1&&(e=1),s=this.y+this.ybase,i=this.rows-1-this.scrollBottom,i=this.rows-1+this.ybase-i;e--;)this.lines.splice(i+1,0,this.blankLine(!0)),this.lines.splice(s,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},s.prototype.deleteChars=function(t){var e,s,i;for(e=t[0],e<1&&(e=1),s=this.y+this.ybase,i=[this.eraseAttr()," "];e--;)this.lines[s].splice(this.x,1),this.lines[s].push(i)},s.prototype.eraseChars=function(t){var e,s,i,r;for(e=t[0],e<1&&(e=1),s=this.y+this.ybase,i=this.x,r=[this.eraseAttr()," "];e--&&i<this.cols;)this.lines[s][i++]=r},s.prototype.charPosAbsolute=function(t){var e=t[0];e<1&&(e=1),this.x=e-1,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.HPositionRelative=function(t){var e=t[0];e<1&&(e=1),this.x+=e,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.sendDeviceAttributes=function(t){t[0]>0||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("[>0;276;0c"):this.is("rxvt-unicode")?this.send("[>85;95;0c"):this.is("linux")?this.send(t[0]+"c"):this.is("screen")&&this.send("[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("[?1;2c"):this.is("linux")&&this.send("[?6c"))},s.prototype.linePosAbsolute=function(t){var e=t[0];e<1&&(e=1),this.y=e-1,this.y>=this.rows&&(this.y=this.rows-1)},s.prototype.VPositionRelative=function(t){var e=t[0];e<1&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1)},s.prototype.HVPosition=function(t){t[0]<1&&(t[0]=1),t[1]<1&&(t[1]=1),this.y=t[0]-1,this.y>=this.rows&&(this.y=this.rows-1),this.x=t[1]-1,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.setMode=function(t){if("object"!=typeof t)if(this.prefix){if("?"===this.prefix)switch(t){case 1:this.applicationCursor=!0;break;case 2:this.setgCharset(0,s.charsets.US),this.setgCharset(1,s.charsets.US),this.setgCharset(2,s.charsets.US),this.setgCharset(3,s.charsets.US);break;case 3:this.savedCols=this.cols,this.resize(132,this.rows);break;case 6:this.originMode=!0;break;case 7:this.wraparoundMode=!0;break;case 12:break;case 66:this.log("Serial port requested application keypad."),this.applicationKeypad=!0;break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=9===t,this.vt200Mouse=1e3===t,this.normalMouse=t>1e3,this.mouseEvents=!0,this.element.style.cursor="default",this.log("Binding to mouse events.");break;case 1004:this.sendFocus=!0;break;case 1005:this.utfMouse=!0;break;case 1006:this.sgrMouse=!0;break;case 1015:this.urxvtMouse=!0;break;case 25:this.cursorHidden=!1;break;case 1049:case 47:case 1047:if(!this.normal){var e={lines:this.lines,ybase:this.ybase,ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs};this.reset(),this.normal=e,this.showCursor()}}}else switch(t){case 4:this.insertMode=!0;break;case 20:}else for(var i=t.length,r=0;r<i;r++)this.setMode(t[r])},s.prototype.resetMode=function(t){if("object"!=typeof t)if(this.prefix){if("?"===this.prefix)switch(t){case 1:this.applicationCursor=!1;break;case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows),delete this.savedCols;break;case 6:this.originMode=!1;break;case 7:this.wraparoundMode=!1;break;case 12:break;case 66:this.log("Switching back to normal keypad."),this.applicationKeypad=!1;break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=!1,this.vt200Mouse=!1,this.normalMouse=!1,this.mouseEvents=!1,this.element.style.cursor="";break;case 1004:this.sendFocus=!1;break;case 1005:this.utfMouse=!1;break;case 1006:this.sgrMouse=!1;break;case 1015:this.urxvtMouse=!1;break;case 25:this.cursorHidden=!0;break;case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}}else switch(t){case 4:this.insertMode=!1;break;case 20:}else for(var e=t.length,s=0;s<e;s++)this.resetMode(t[s])},s.prototype.setScrollRegion=function(t){this.prefix||(this.scrollTop=(t[0]||1)-1,this.scrollBottom=(t[1]||this.rows)-1,this.x=0,this.y=0)},s.prototype.saveCursor=function(t){this.savedX=this.x,this.savedY=this.y},s.prototype.restoreCursor=function(t){this.x=this.savedX||0,this.y=this.savedY||0},s.prototype.cursorForwardTab=function(t){for(var e=t[0]||1;e--;)this.x=this.nextStop()},s.prototype.scrollUp=function(t){for(var e=t[0]||1;e--;)this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},s.prototype.scrollDown=function(t){for(var e=t[0]||1;e--;)this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},s.prototype.initMouseTracking=function(t){},s.prototype.resetTitleModes=function(t){},s.prototype.cursorBackwardTab=function(t){for(var e=t[0]||1;e--;)this.x=this.prevStop()},s.prototype.repeatPrecedingCharacter=function(t){for(var e=t[0]||1,s=this.lines[this.ybase+this.y],i=s[this.x-1]||[this.defAttr," "];e--;)s[this.x++]=i},s.prototype.tabClear=function(t){var e=t[0];e<=0?delete this.tabs[this.x]:3===e&&(this.tabs={})},s.prototype.mediaCopy=function(t){},s.prototype.setResources=function(t){},s.prototype.disableModifiers=function(t){},s.prototype.setPointerMode=function(t){},s.prototype.softReset=function(t){this.cursorHidden=!1,this.insertMode=!1,this.originMode=!1,this.wraparoundMode=!1,this.applicationKeypad=!1,this.applicationCursor=!1,this.scrollTop=0,this.scrollBottom=this.rows-1,this.curAttr=this.defAttr,this.x=this.y=0,this.charset=null,this.glevel=0,this.charsets=[null]},s.prototype.requestAnsiMode=function(t){},s.prototype.requestPrivateMode=function(t){},s.prototype.setConformanceLevel=function(t){},s.prototype.loadLEDs=function(t){},s.prototype.setCursorStyle=function(t){},s.prototype.setCharProtectionAttr=function(t){},s.prototype.restorePrivateValues=function(t){},s.prototype.setAttrInRectangle=function(t){for(var e,s,i=t[0],r=t[1],n=t[2],o=t[3],a=t[4];i<n+1;i++)for(e=this.lines[this.ybase+i],s=r;s<o;s++)e[s]=[a,e[s][1]];this.updateRange(t[0]),this.updateRange(t[2])},s.prototype.savePrivateValues=function(t){},s.prototype.manipulateWindow=function(t){},s.prototype.reverseAttrInRectangle=function(t){},s.prototype.setTitleModeFeature=function(t){},s.prototype.setWarningBellVolume=function(t){},s.prototype.setMarginBellVolume=function(t){},s.prototype.copyRectangle=function(t){},s.prototype.enableFilterRectangle=function(t){},s.prototype.requestParameters=function(t){},s.prototype.selectChangeExtent=function(t){},s.prototype.fillRectangle=function(t){for(var e,s,i=t[0],r=t[1],n=t[2],o=t[3],a=t[4];r<o+1;r++)for(e=this.lines[this.ybase+r],s=n;s<a;s++)e[s]=[e[s][0],E.fromCharCode(i)];this.updateRange(t[1]),this.updateRange(t[3])},s.prototype.enableLocatorReporting=function(t){t[0]>0},s.prototype.eraseRectangle=function(t){var e,s,i,r=t[0],n=t[1],o=t[2],a=t[3];for(i=[this.eraseAttr()," "];r<o+1;r++)for(e=this.lines[this.ybase+r],s=n;s<a;s++)e[s]=i;this.updateRange(t[0]),this.updateRange(t[2])},s.prototype.setLocatorEvents=function(t){},s.prototype.selectiveEraseRectangle=function(t){},s.prototype.requestLocatorPosition=function(t){},s.prototype.insertColumns=function(){for(var t,e=params[0],s=this.ybase+this.rows,i=[this.eraseAttr()," "];e--;)for(t=this.ybase;t<s;t++)this.lines[t].splice(this.x+1,0,i),this.lines[t].pop();this.maxRange()},s.prototype.deleteColumns=function(){for(var t,e=params[0],s=this.ybase+this.rows,i=[this.eraseAttr()," "];e--;)for(t=this.ybase;t<s;t++)this.lines[t].splice(this.x,1),this.lines[t].push(i);this.maxRange()},s.prototype.enterPrefix=function(){this.prefixMode=!0},s.prototype.leavePrefix=function(){this.prefixMode=!1},s.prototype.enterSelect=function(){this._real={x:this.x,y:this.y,ydisp:this.ydisp,ybase:this.ybase,cursorHidden:this.cursorHidden,lines:this.copyBuffer(this.lines),write:this.write},this.write=function(){},this.selectMode=!0,this.visualMode=!1,this.cursorHidden=!1,this.refresh(this.y,this.y)},s.prototype.leaveSelect=function(){this.x=this._real.x,this.y=this._real.y,this.ydisp=this._real.ydisp,this.ybase=this._real.ybase,this.cursorHidden=this._real.cursorHidden,this.lines=this._real.lines,this.write=this._real.write,delete this._real,this.selectMode=!1,this.visualMode=!1,this.refresh(0,this.rows-1)},s.prototype.enterVisual=function(){this._real.preVisual=this.copyBuffer(this.lines),this.selectText(this.x,this.x,this.ydisp+this.y,this.ydisp+this.y),this.visualMode=!0},s.prototype.leaveVisual=function(){this.lines=this._real.preVisual,delete this._real.preVisual,delete this._selected,this.visualMode=!1,this.refresh(0,this.rows-1)},s.prototype.enterSearch=function(t){this.entry="",this.searchMode=!0,this.searchDown=t,this._real.preSearch=this.copyBuffer(this.lines),this._real.preSearchX=this.x,this._real.preSearchY=this.y;for(var e=this.ydisp+this.rows-1,s=0;s<this.entryPrefix.length;s++)this.lines[e][s]=[this.defAttr&-512|4,this.entryPrefix[s]];this.y=this.rows-1,this.x=this.entryPrefix.length,this.refresh(this.rows-1,this.rows-1)},s.prototype.leaveSearch=function(){this.searchMode=!1,this._real.preSearch&&(this.lines=this._real.preSearch,this.x=this._real.preSearchX,this.y=this._real.preSearchY,delete this._real.preSearch,delete this._real.preSearchX,delete this._real.preSearchY),this.refresh(this.rows-1,this.rows-1)},s.prototype.copyBuffer=function(t){for(var t=t||this.lines,e=[],s=0;s<t.length;s++){e[s]=[];for(var i=0;i<t[s].length;i++)e[s][i]=[t[s][i][0],t[s][i][1]]}return e},s.prototype.getCopyTextarea=function(t){var e=this._copyTextarea,s=this.document;return e||(e=s.createElement("textarea"),e.style.position="absolute",e.style.left="-32000px",e.style.top="-32000px",e.style.width="0px",e.style.height="0px",e.style.opacity="0",e.style.backgroundColor="transparent",e.style.borderStyle="none",e.style.outlineStyle="none",s.getElementsByTagName("body")[0].appendChild(e),this._copyTextarea=e),e},s.prototype.copyText=function(t){var e=this,s=this.getCopyTextarea();this.emit("copy",t),s.focus(),s.textContent=t,s.value=t,s.setSelectionRange(0,t.length),C(function(){e.element.focus(),e.focus()},1)},s.prototype.selectText=function(t,e,s,i){var r,n,o,a,h,c,u,l,f;if(this._selected){for(r=this._selected.x1,n=this._selected.x2,o=this._selected.y1,a=this._selected.y2,a<o&&(h=n,n=r,r=h,h=a,a=o,o=h),n<r&&o===a&&(h=n,n=r,r=h),u=o;u<=a;u++)for(c=0,l=this.cols-1,u===o&&(c=r),u===a&&(l=n);c<=l;c++)null!=this.lines[u][c].old&&(f=this.lines[u][c].old,delete this.lines[u][c].old,this.lines[u][c]=[f,this.lines[u][c][1]]);s=this._selected.y1,t=this._selected.x1}for(s=Math.max(s,0),s=Math.min(s,this.ydisp+this.rows-1),i=Math.max(i,0),i=Math.min(i,this.ydisp+this.rows-1),this._selected={x1:t,x2:e,y1:s,y2:i},i<s&&(h=e,e=t,t=h,h=i,i=s,s=h),e<t&&s===i&&(h=e,e=t,t=h),u=s;u<=i;u++)for(c=0,l=this.cols-1,u===s&&(c=t),u===i&&(l=e);c<=l;c++)f=this.lines[u][c][0],this.lines[u][c]=[f&-512|261636,this.lines[u][c][1]],this.lines[u][c].old=f;s-=this.ydisp,i-=this.ydisp,s=Math.max(s,0),s=Math.min(s,this.rows-1),i=Math.max(i,0),i=Math.min(i,this.rows-1),this.refresh(0,this.rows-1)},s.prototype.grabText=function(t,e,s,i){var r,n,o,a,h,c="",l="";for(i<s&&(h=e,e=t,t=h,h=i,i=s,s=h),e<t&&s===i&&(h=e,e=t,t=h),o=s;o<=i;o++){for(n=0,a=this.cols-1,o===s&&(n=t),o===i&&(a=e);n<=a;n++)r=this.lines[o][n][1]," "!==r?(l&&(c+=l,l=""),c+=r,u(r)&&n++):l+=r;l="",c+="\n"}for(n=e,o=i;n<this.cols;n++)if(" "!==this.lines[o][n][1]){c=c.slice(0,-1);break;
}return c},s.prototype.keyPrefix=function(t,e){"k"===e||"&"===e?this.destroy():"p"===e||"]"===e?this.emit("request paste"):"c"===e?this.emit("request create"):e>="0"&&e<="9"?(e=+e-1,~e||(e=9),this.emit("request term",e)):"n"===e?this.emit("request term next"):"P"===e?this.emit("request term previous"):":"===e?this.emit("request command mode"):"["===e&&this.enterSelect()},s.prototype.keySelect=function(t,e){if(this.showCursor(),this.searchMode||"n"===e||"N"===e)return this.keySearch(t,e);if(""===e){var s=this.ydisp+this.y;return this.ydisp===this.ybase?(this.y=Math.min(this.y+(this.rows-1)/2|0,this.rows-1),this.refresh(0,this.rows-1)):this.scrollDisp((this.rows-1)/2|0),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if(""===e){var s=this.ydisp+this.y;return 0===this.ydisp?(this.y=Math.max(this.y-(this.rows-1)/2|0,0),this.refresh(0,this.rows-1)):this.scrollDisp(-(this.rows-1)/2|0),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if(""===e){var s=this.ydisp+this.y;return this.scrollDisp(this.rows-1),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if(""===e){var s=this.ydisp+this.y;return this.scrollDisp(-(this.rows-1)),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if("k"===e||"[A"===e){var s=this.ydisp+this.y;return this.y--,this.y<0&&(this.y=0,this.scrollDisp(-1)),void(this.visualMode?this.selectText(this.x,this.x,s,this.ydisp+this.y):this.refresh(this.y,this.y+1))}if("j"===e||"[B"===e){var s=this.ydisp+this.y;return this.y++,this.y>=this.rows&&(this.y=this.rows-1,this.scrollDisp(1)),void(this.visualMode?this.selectText(this.x,this.x,s,this.ydisp+this.y):this.refresh(this.y-1,this.y))}if("h"===e||"[D"===e){var i=this.x;return this.x--,this.x<0&&(this.x=0),void(this.visualMode?this.selectText(i,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("l"===e||"[C"===e){var i=this.x;return this.x++,this.x>=this.cols&&(this.x=this.cols-1),void(this.visualMode?this.selectText(i,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("v"===e||" "===e)return void(this.visualMode?this.leaveVisual():this.enterVisual());if("y"!==e){if("q"===e||""===e)return void(this.visualMode?this.leaveVisual():this.leaveSelect());if("w"===e||"W"===e){for(var r=this.x,n=this.y,o=this.ydisp,i=this.x,s=this.y,a=this.ydisp,h=!1;;){for(var c=this.lines[a+s];i<this.cols;){if(c[i][1]<=" ")h=!0;else if(h)break;i++}if(i>=this.cols&&(i=this.cols-1),!(i===this.cols-1&&c[i][1]<=" "))break;if(i=0,++s>=this.rows&&(s--,++a>this.ybase)){a=this.ybase,i=this.x;break}}return this.x=i,this.y=s,this.scrollDisp(-this.ydisp+a),void(this.visualMode&&this.selectText(r,this.x,n+o,this.ydisp+this.y))}if("b"===e||"B"===e){for(var r=this.x,n=this.y,o=this.ydisp,i=this.x,s=this.y,a=this.ydisp;;){for(var c=this.lines[a+s],h=i>0&&c[i][1]>" "&&c[i-1][1]>" ";i>=0;){if(c[i][1]<=" "){if(h&&i+1<this.cols&&c[i+1][1]>" "){i++;break}h=!0}i--}if(i<0&&(i=0),0!==i||!(c[i][1]<=" ")&&h)break;if(i=this.cols-1,--s<0&&(s++,--a<0)){a++,i=0;break}}return this.x=i,this.y=s,this.scrollDisp(-this.ydisp+a),void(this.visualMode&&this.selectText(r,this.x,n+o,this.ydisp+this.y))}if("e"===e||"E"===e){var i=this.x+1,s=this.y,a=this.ydisp;for(i>=this.cols&&i--;;){for(var c=this.lines[a+s];i<this.cols&&c[i][1]<=" ";)i++;for(;i<this.cols;){if(c[i][1]<=" "&&i-1>=0&&c[i-1][1]>" "){i--;break}i++}if(i>=this.cols&&(i=this.cols-1),!(i===this.cols-1&&c[i][1]<=" "))break;if(i=0,++s>=this.rows&&(s--,++a>this.ybase)){a=this.ybase;break}}return this.x=i,this.y=s,this.scrollDisp(-this.ydisp+a),void(this.visualMode&&this.selectText(r,this.x,n+o,this.ydisp+this.y))}if("^"===e||"0"===e){var r=this.x;if("0"===e)this.x=0;else if("^"===e){for(var c=this.lines[this.ydisp+this.y],i=0;i<this.cols&&!(c[i][1]>" ");)i++;i>=this.cols&&(i=this.cols-1),this.x=i}return void(this.visualMode?this.selectText(r,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("$"===e){for(var r=this.x,c=this.lines[this.ydisp+this.y],i=this.cols-1;i>=0;){if(c[i][1]>" "){this.visualMode&&i<this.cols-1&&i++;break}i--}return i<0&&(i=0),this.x=i,void(this.visualMode?this.selectText(r,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("g"===e||"G"===e){var r=this.x,n=this.y,o=this.ydisp;return"g"===e?(this.x=0,this.y=0,this.scrollDisp(-this.ydisp)):"G"===e&&(this.x=0,this.y=this.rows-1,this.scrollDisp(this.ybase)),void(this.visualMode&&this.selectText(r,this.x,n+o,this.ydisp+this.y))}if("H"===e||"M"===e||"L"===e){var r=this.x,n=this.y;return"H"===e?(this.x=0,this.y=0):"M"===e?(this.x=0,this.y=this.rows/2|0):"L"===e&&(this.x=0,this.y=this.rows-1),void(this.visualMode?this.selectText(r,this.x,this.ydisp+n,this.ydisp+this.y):(this.refresh(n,n),this.refresh(this.y,this.y)))}if("{"===e||"}"===e){var c,u,r=this.x,n=this.y,o=this.ydisp,l=!1,f=!1,p=-1,s=this.y+("{"===e?-1:1),a=this.ydisp;for("{"===e?s<0&&(s++,a>0&&a--):"}"===e&&s>=this.rows&&(s--,a<this.ybase&&a++);;){for(c=this.lines[a+s],u=0;u<this.cols;u++){if(c[u][1]>" "){p===-1&&(p=0),l=!0;break}if(u===this.cols-1){p===-1?p=1:0===p?f=!0:1===p&&l&&(f=!0);break}}if(f)break;if("{"===e){if(s--,s<0){if(s++,!(a>0))break;a--}}else if("}"===e&&(s++,s>=this.rows)){if(s--,!(a<this.ybase))break;a++}}return f||("{"===e?(s=0,a=0):"}"===e&&(s=this.rows-1,a=this.ybase)),this.x=0,this.y=s,this.scrollDisp(-this.ydisp+a),void(this.visualMode&&this.selectText(r,this.x,n+o,this.ydisp+this.y))}return("/"===e||"?"===e)&&void(this.visualMode||this.enterSearch("/"===e))}if(this.visualMode){var d=this.grabText(this._selected.x1,this._selected.x2,this._selected.y1,this._selected.y2);this.copyText(d),this.leaveVisual()}},s.prototype.keySearch=function(t,e){if(""===e)return void this.leaveSearch();if("\r"===e||!this.searchMode&&("n"===e||"N"===e)){this.leaveSearch();var s=this.entry;if(!s)return void this.refresh(0,this.rows-1);for(var i,r,n,o=this.x,a=this.y,h=this.ydisp,c=!1,u=!1,l=this.x+1,f=this.ydisp+this.y,p="N"===e?this.searchDown:!this.searchDown;;){for(i=this.lines[f];l<this.cols;){for(n=0;n<s.length&&!(l+n>=this.cols)&&i[l+n][1]===s[n];n++)if(i[l+n][1]===s[n]&&n===s.length-1){c=!0;break}if(c)break;l+=n+1}if(c)break;if(l=0,p){if(f--,f<0){if(u)break;u=!0,f=this.ybase+this.rows-1}}else if(f++,f>this.ybase+this.rows-1){if(u)break;u=!0,f=0}}return c?(f-this.ybase<0?(r=f,f=0,r>this.ybase&&(f=r-this.ybase,r=this.ybase)):(r=this.ybase,f-=this.ybase),this.x=l,this.y=f,this.scrollDisp(-this.ydisp+r),void(this.visualMode&&this.selectText(o,this.x,a+h,this.ydisp+this.y))):void this.refresh(0,this.rows-1)}if("\b"===e||""===e){if(0===this.entry.length)return;var d=this.ydisp+this.rows-1;this.entry=this.entry.slice(0,-1);var n=this.entryPrefix.length+this.entry.length;return this.lines[d][n]=[this.lines[d][n][0]," "],this.x--,this.refresh(this.rows-1,this.rows-1),void this.refresh(this.y,this.y)}if(1===e.length&&e>=" "&&e<="~"){var d=this.ydisp+this.rows-1;this.entry+=e;var n=this.entryPrefix.length+this.entry.length-1;return this.lines[d][n]=[this.defAttr&-512|4,e],this.x++,this.refresh(this.rows-1,this.rows-1),void this.refresh(this.y,this.y)}return!1},s.charsets={},s.charsets.SCLD={"`":"◆",a:"▒",b:"\t",c:"\f",d:"\r",e:"\n",f:"°",g:"±",h:"␤",i:"\x0B",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},s.charsets.UK=null,s.charsets.US=null,s.charsets.Dutch=null,s.charsets.Finnish=null,s.charsets.French=null,s.charsets.FrenchCanadian=null,s.charsets.German=null,s.charsets.Italian=null,s.charsets.NorwegianDanish=null,s.charsets.Spanish=null,s.charsets.Swedish=null,s.charsets.Swiss=null,s.charsets.ISOLatin=null;var E=this.String,C=this.setTimeout,S=this.setInterval;l._cache={},l.distance=function(t,e,s,i,r,n){return Math.pow(30*(t-i),2)+Math.pow(59*(e-r),2)+Math.pow(11*(s-n),2)},s.EventEmitter=t,s.Stream=e,s.inherits=a,s.on=r,s.off=n,s.cancel=o,"undefined"!=typeof module?module.exports=s:this.Terminal=s}).call(function(){return this||("undefined"!=typeof window?window:global)}()),function t(e,s,i){function r(o,a){if(!s[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(n)return n(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=s[o]={exports:{}};e[o][0].call(u.exports,function(t){var s=e[o][1][t];return r(s?s:t)},u,u.exports,t,e,s,i)}return s[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,s){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function n(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!n(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,s,i,n,h,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(s=this._events[t],a(s))return!1;if(r(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),s.apply(this,n)}else if(o(s))for(n=Array.prototype.slice.call(arguments,1),c=s.slice(),i=c.length,h=0;h<i;h++)c[h].apply(this,n);return!0},i.prototype.addListener=function(t,e){var s;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(s=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function s(){this.removeListener(t,s),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return s.listener=e,this.on(t,s),this},i.prototype.removeListener=function(t,e){var s,i,n,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=this._events[t],n=s.length,i=-1,s===e||r(s.listener)&&s.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(s)){for(a=n;a-- >0;)if(s[a]===e||s[a].listener&&s[a].listener===e){i=a;break}if(i<0)return this;1===s.length?(s.length=0,delete this._events[t]):s.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[t],r(s))this.removeListener(t,s);else if(s)for(;s.length;)this.removeListener(t,s[s.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,s){(function(){function t(t){function e(e,s,i,r,n,o){for(;n>=0&&n<o;n+=t){var a=r?r[n]:n;i=s(i,e[a],a,e)}return i}return function(s,i,r,n){i=k(i,n,4);var o=!A(s)&&x.keys(s),a=(o||s).length,h=t>0?0:a-1;return arguments.length<3&&(r=s[o?o[h]:h],h+=t),e(s,i,r,o,h,a)}}function i(t){return function(e,s,i){s=w(s,i);for(var r=M(e),n=t>0?0:r-1;n>=0&&n<r;n+=t)if(s(e[n],n,e))return n;return-1}}function r(t,e,s){return function(i,r,n){var o=0,a=M(i);if("number"==typeof n)t>0?o=n>=0?n:Math.max(n+a,o):a=n>=0?Math.min(n+1,a):n+a+1;else if(s&&n&&a)return n=s(i,r),i[n]===r?n:-1;if(r!==r)return n=e(f.call(i,o,a),x.isNaN),n>=0?n+o:-1;for(n=t>0?o:a-1;n>=0&&n<a;n+=t)if(i[n]===r)return n;return-1}}function n(t,e){var s=P.length,i=t.constructor,r=x.isFunction(i)&&i.prototype||c,n="constructor";for(x.has(t,n)&&!x.contains(e,n)&&e.push(n);s--;)n=P[s],n in t&&t[n]!==r[n]&&!x.contains(e,n)&&e.push(n)}var o=this,a=o._,h=Array.prototype,c=Object.prototype,u=Function.prototype,l=h.push,f=h.slice,p=c.toString,d=c.hasOwnProperty,y=Array.isArray,m=Object.keys,b=u.bind,v=Object.create,g=function(){},x=function(t){return t instanceof x?t:this instanceof x?void(this._wrapped=t):new x(t)};"undefined"!=typeof s?("undefined"!=typeof e&&e.exports&&(s=e.exports=x),s._=x):o._=x,x.VERSION="1.8.3";var k=function(t,e,s){if(void 0===e)return t;switch(null==s?3:s){case 1:return function(s){return t.call(e,s)};case 2:return function(s,i){return t.call(e,s,i)};case 3:return function(s,i,r){return t.call(e,s,i,r)};case 4:return function(s,i,r,n){return t.call(e,s,i,r,n)}}return function(){return t.apply(e,arguments)}},w=function(t,e,s){return null==t?x.identity:x.isFunction(t)?k(t,e,s):x.isObject(t)?x.matcher(t):x.property(t)};x.iteratee=function(t,e){return w(t,e,1/0)};var _=function(t,e){return function(s){var i=arguments.length;if(i<2||null==s)return s;for(var r=1;r<i;r++)for(var n=arguments[r],o=t(n),a=o.length,h=0;h<a;h++){var c=o[h];e&&void 0!==s[c]||(s[c]=n[c])}return s}},E=function(t){if(!x.isObject(t))return{};if(v)return v(t);g.prototype=t;var e=new g;return g.prototype=null,e},C=function(t){return function(e){return null==e?void 0:e[t]}},S=Math.pow(2,53)-1,M=C("length"),A=function(t){var e=M(t);return"number"==typeof e&&e>=0&&e<=S};x.each=x.forEach=function(t,e,s){e=k(e,s);var i,r;if(A(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var n=x.keys(t);for(i=0,r=n.length;i<r;i++)e(t[n[i]],n[i],t)}return t},x.map=x.collect=function(t,e,s){e=w(e,s);for(var i=!A(t)&&x.keys(t),r=(i||t).length,n=Array(r),o=0;o<r;o++){var a=i?i[o]:o;n[o]=e(t[a],a,t)}return n},x.reduce=x.foldl=x.inject=t(1),x.reduceRight=x.foldr=t(-1),x.find=x.detect=function(t,e,s){var i;if(i=A(t)?x.findIndex(t,e,s):x.findKey(t,e,s),void 0!==i&&i!==-1)return t[i]},x.filter=x.select=function(t,e,s){var i=[];return e=w(e,s),x.each(t,function(t,s,r){e(t,s,r)&&i.push(t)}),i},x.reject=function(t,e,s){return x.filter(t,x.negate(w(e)),s)},x.every=x.all=function(t,e,s){e=w(e,s);for(var i=!A(t)&&x.keys(t),r=(i||t).length,n=0;n<r;n++){var o=i?i[n]:n;if(!e(t[o],o,t))return!1}return!0},x.some=x.any=function(t,e,s){e=w(e,s);for(var i=!A(t)&&x.keys(t),r=(i||t).length,n=0;n<r;n++){var o=i?i[n]:n;if(e(t[o],o,t))return!0}return!1},x.contains=x.includes=x.include=function(t,e,s,i){return A(t)||(t=x.values(t)),("number"!=typeof s||i)&&(s=0),x.indexOf(t,e,s)>=0},x.invoke=function(t,e){var s=f.call(arguments,2),i=x.isFunction(e);return x.map(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,s)})},x.pluck=function(t,e){return x.map(t,x.property(e))},x.where=function(t,e){return x.filter(t,x.matcher(e))},x.findWhere=function(t,e){return x.find(t,x.matcher(e))},x.max=function(t,e,s){var i,r,n=-(1/0),o=-(1/0);if(null==e&&null!=t){t=A(t)?t:x.values(t);for(var a=0,h=t.length;a<h;a++)i=t[a],i>n&&(n=i)}else e=w(e,s),x.each(t,function(t,s,i){r=e(t,s,i),(r>o||r===-(1/0)&&n===-(1/0))&&(n=t,o=r)});return n},x.min=function(t,e,s){var i,r,n=1/0,o=1/0;if(null==e&&null!=t){t=A(t)?t:x.values(t);for(var a=0,h=t.length;a<h;a++)i=t[a],i<n&&(n=i)}else e=w(e,s),x.each(t,function(t,s,i){r=e(t,s,i),(r<o||r===1/0&&n===1/0)&&(n=t,o=r)});return n},x.shuffle=function(t){for(var e,s=A(t)?t:x.values(t),i=s.length,r=Array(i),n=0;n<i;n++)e=x.random(0,n),e!==n&&(r[n]=r[e]),r[e]=s[n];return r},x.sample=function(t,e,s){return null==e||s?(A(t)||(t=x.values(t)),t[x.random(t.length-1)]):x.shuffle(t).slice(0,Math.max(0,e))},x.sortBy=function(t,e,s){return e=w(e,s),x.pluck(x.map(t,function(t,s,i){return{value:t,index:s,criteria:e(t,s,i)}}).sort(function(t,e){var s=t.criteria,i=e.criteria;if(s!==i){if(s>i||void 0===s)return 1;if(s<i||void 0===i)return-1}return t.index-e.index}),"value")};var O=function(t){return function(e,s,i){var r={};return s=w(s,i),x.each(e,function(i,n){var o=s(i,n,e);t(r,i,o)}),r}};x.groupBy=O(function(t,e,s){x.has(t,s)?t[s].push(e):t[s]=[e]}),x.indexBy=O(function(t,e,s){t[s]=e}),x.countBy=O(function(t,e,s){x.has(t,s)?t[s]++:t[s]=1}),x.toArray=function(t){return t?x.isArray(t)?f.call(t):A(t)?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:A(t)?t.length:x.keys(t).length},x.partition=function(t,e,s){e=w(e,s);var i=[],r=[];return x.each(t,function(t,s,n){(e(t,s,n)?i:r).push(t)}),[i,r]},x.first=x.head=x.take=function(t,e,s){if(null!=t)return null==e||s?t[0]:x.initial(t,t.length-e)},x.initial=function(t,e,s){return f.call(t,0,Math.max(0,t.length-(null==e||s?1:e)))},x.last=function(t,e,s){if(null!=t)return null==e||s?t[t.length-1]:x.rest(t,Math.max(0,t.length-e))},x.rest=x.tail=x.drop=function(t,e,s){return f.call(t,null==e||s?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var L=function(t,e,s,i){for(var r=[],n=0,o=i||0,a=M(t);o<a;o++){var h=t[o];if(A(h)&&(x.isArray(h)||x.isArguments(h))){e||(h=L(h,e,s));var c=0,u=h.length;for(r.length+=u;c<u;)r[n++]=h[c++]}else s||(r[n++]=h)}return r};x.flatten=function(t,e){return L(t,e,!1)},x.without=function(t){return x.difference(t,f.call(arguments,1))},x.uniq=x.unique=function(t,e,s,i){x.isBoolean(e)||(i=s,s=e,e=!1),null!=s&&(s=w(s,i));for(var r=[],n=[],o=0,a=M(t);o<a;o++){var h=t[o],c=s?s(h,o,t):h;e?(o&&n===c||r.push(h),n=c):s?x.contains(n,c)||(n.push(c),r.push(h)):x.contains(r,h)||r.push(h)}return r},x.union=function(){return x.uniq(L(arguments,!0,!0))},x.intersection=function(t){for(var e=[],s=arguments.length,i=0,r=M(t);i<r;i++){var n=t[i];if(!x.contains(e,n)){for(var o=1;o<s&&x.contains(arguments[o],n);o++);o===s&&e.push(n)}}return e},x.difference=function(t){var e=L(arguments,!0,!0,1);return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(t){for(var e=t&&x.max(t,M).length||0,s=Array(e),i=0;i<e;i++)s[i]=x.pluck(t,i);return s},x.object=function(t,e){for(var s={},i=0,r=M(t);i<r;i++)e?s[t[i]]=e[i]:s[t[i][0]]=t[i][1];return s},x.findIndex=i(1),x.findLastIndex=i(-1),x.sortedIndex=function(t,e,s,i){s=w(s,i,1);for(var r=s(e),n=0,o=M(t);n<o;){var a=Math.floor((n+o)/2);s(t[a])<r?n=a+1:o=a}return n},x.indexOf=r(1,x.findIndex,x.sortedIndex),x.lastIndexOf=r(-1,x.findLastIndex),x.range=function(t,e,s){null==e&&(e=t||0,t=0),s=s||1;for(var i=Math.max(Math.ceil((e-t)/s),0),r=Array(i),n=0;n<i;n++,t+=s)r[n]=t;return r};var T=function(t,e,s,i,r){if(!(i instanceof e))return t.apply(s,r);var n=E(t.prototype),o=t.apply(n,r);return x.isObject(o)?o:n};x.bind=function(t,e){if(b&&t.bind===b)return b.apply(t,f.call(arguments,1));if(!x.isFunction(t))throw new TypeError("Bind must be called on a function");var s=f.call(arguments,2),i=function(){return T(t,i,e,this,s.concat(f.call(arguments)))};return i},x.partial=function(t){var e=f.call(arguments,1),s=function(){for(var i=0,r=e.length,n=Array(r),o=0;o<r;o++)n[o]=e[o]===x?arguments[i++]:e[o];for(;i<arguments.length;)n.push(arguments[i++]);return T(t,s,this,this,n)};return s},x.bindAll=function(t){var e,s,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)s=arguments[e],t[s]=x.bind(t[s],t);return t},x.memoize=function(t,e){var s=function(i){var r=s.cache,n=""+(e?e.apply(this,arguments):i);return x.has(r,n)||(r[n]=t.apply(this,arguments)),r[n]};return s.cache={},s},x.delay=function(t,e){var s=f.call(arguments,2);return setTimeout(function(){return t.apply(null,s)},e)},x.defer=x.partial(x.delay,x,1),x.throttle=function(t,e,s){var i,r,n,o=null,a=0;s||(s={});var h=function(){a=s.leading===!1?0:x.now(),o=null,n=t.apply(i,r),o||(i=r=null)};return function(){var c=x.now();a||s.leading!==!1||(a=c);var u=e-(c-a);return i=this,r=arguments,u<=0||u>e?(o&&(clearTimeout(o),o=null),a=c,n=t.apply(i,r),o||(i=r=null)):o||s.trailing===!1||(o=setTimeout(h,u)),n}},x.debounce=function(t,e,s){var i,r,n,o,a,h=function(){var c=x.now()-o;c<e&&c>=0?i=setTimeout(h,e-c):(i=null,s||(a=t.apply(n,r),i||(n=r=null)))};return function(){n=this,r=arguments,o=x.now();var c=s&&!i;return i||(i=setTimeout(h,e)),c&&(a=t.apply(n,r),n=r=null),a}},x.wrap=function(t,e){return x.partial(e,t)},x.negate=function(t){return function(){return!t.apply(this,arguments)}},x.compose=function(){var t=arguments,e=t.length-1;return function(){for(var s=e,i=t[e].apply(this,arguments);s--;)i=t[s].call(this,i);return i}},x.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},x.before=function(t,e){var s;return function(){return--t>0&&(s=e.apply(this,arguments)),t<=1&&(e=null),s}},x.once=x.partial(x.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(t){if(!x.isObject(t))return[];if(m)return m(t);var e=[];for(var s in t)x.has(t,s)&&e.push(s);return D&&n(t,e),e},x.allKeys=function(t){if(!x.isObject(t))return[];var e=[];for(var s in t)e.push(s);return D&&n(t,e),e},x.values=function(t){for(var e=x.keys(t),s=e.length,i=Array(s),r=0;r<s;r++)i[r]=t[e[r]];return i},x.mapObject=function(t,e,s){e=w(e,s);for(var i,r=x.keys(t),n=r.length,o={},a=0;a<n;a++)i=r[a],o[i]=e(t[i],i,t);return o},x.pairs=function(t){for(var e=x.keys(t),s=e.length,i=Array(s),r=0;r<s;r++)i[r]=[e[r],t[e[r]]];return i},x.invert=function(t){for(var e={},s=x.keys(t),i=0,r=s.length;i<r;i++)e[t[s[i]]]=s[i];return e},x.functions=x.methods=function(t){var e=[];for(var s in t)x.isFunction(t[s])&&e.push(s);return e.sort()},x.extend=_(x.allKeys),x.extendOwn=x.assign=_(x.keys),x.findKey=function(t,e,s){e=w(e,s);for(var i,r=x.keys(t),n=0,o=r.length;n<o;n++)if(i=r[n],e(t[i],i,t))return i},x.pick=function(t,e,s){var i,r,n={},o=t;if(null==o)return n;x.isFunction(e)?(r=x.allKeys(o),i=k(e,s)):(r=L(arguments,!1,!1,1),i=function(t,e,s){return e in s},o=Object(o));for(var a=0,h=r.length;a<h;a++){var c=r[a],u=o[c];i(u,c,o)&&(n[c]=u)}return n},x.omit=function(t,e,s){if(x.isFunction(e))e=x.negate(e);else{var i=x.map(L(arguments,!1,!1,1),String);e=function(t,e){return!x.contains(i,e)}}return x.pick(t,e,s)},x.defaults=_(x.allKeys,!0),x.create=function(t,e){var s=E(t);return e&&x.extendOwn(s,e),s},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t},x.isMatch=function(t,e){var s=x.keys(e),i=s.length;if(null==t)return!i;for(var r=Object(t),n=0;n<i;n++){var o=s[n];if(e[o]!==r[o]||!(o in r))return!1}return!0};var B=function(t,e,s,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var r=p.call(t);if(r!==p.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var n="[object Array]"===r;if(!n){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,a=e.constructor;if(o!==a&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}s=s||[],i=i||[];for(var h=s.length;h--;)if(s[h]===t)return i[h]===e;if(s.push(t),i.push(e),n){if(h=t.length,h!==e.length)return!1;for(;h--;)if(!B(t[h],e[h],s,i))return!1}else{var c,u=x.keys(t);if(h=u.length,x.keys(e).length!==h)return!1;for(;h--;)if(c=u[h],!x.has(e,c)||!B(t[c],e[c],s,i))return!1}return s.pop(),i.pop(),!0};x.isEqual=function(t,e){return B(t,e)},x.isEmpty=function(t){return null==t||(A(t)&&(x.isArray(t)||x.isString(t)||x.isArguments(t))?0===t.length:0===x.keys(t).length)},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=y||function(t){return"[object Array]"===p.call(t)},x.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){x["is"+t]=function(e){return p.call(e)==="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return x.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(x.isFunction=function(t){return"function"==typeof t||!1}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!==+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===p.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return null!=t&&d.call(t,e)},x.noConflict=function(){return o._=a,this},x.identity=function(t){return t},x.constant=function(t){return function(){return t}},x.noop=function(){},x.property=C,x.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},x.matcher=x.matches=function(t){return t=x.extendOwn({},t),function(e){return x.isMatch(e,t)}},x.times=function(t,e,s){var i=Array(Math.max(0,t));e=k(e,s,1);for(var r=0;r<t;r++)i[r]=e(r);return i},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},x.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=x.invert(R),K=function(t){var e=function(e){return t[e]},s="(?:"+x.keys(t).join("|")+")",i=RegExp(s),r=RegExp(s,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};x.escape=K(R),x.unescape=K(j),x.result=function(t,e,s){var i=null==t?void 0:t[e];return void 0===i&&(i=s),x.isFunction(i)?i.call(t):i};var q=0;x.uniqueId=function(t){var e=++q+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,U=function(t){return"\\"+N[t]};x.template=function(t,e,s){!e&&s&&(e=s),e=x.defaults({},e,x.templateSettings);var i=RegExp([(e.escape||I).source,(e.interpolate||I).source,(e.evaluate||I).source].join("|")+"|$","g"),r=0,n="__p+='";t.replace(i,function(e,s,i,o,a){return n+=t.slice(r,a).replace(F,U),r=a+e.length,s?n+="'+\n((__t=("+s+"))==null?'':_.escape(__t))+\n'":i?n+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(n+="';\n"+o+"\n__p+='"),e}),n+="';\n",e.variable||(n="with(obj||{}){\n"+n+"}\n"),n="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+n+"return __p;\n";try{var o=new Function(e.variable||"obj","_",n)}catch(a){throw a.source=n,a}var h=function(t){return o.call(this,t,x)},c=e.variable||"obj";return h.source="function("+c+"){\n"+n+"}",h},x.chain=function(t){var e=x(t);return e._chain=!0,e};var H=function(t,e){return t._chain?x(e).chain():e};x.mixin=function(t){x.each(x.functions(t),function(e){var s=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),H(this,s.apply(x,t))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=h[t];x.prototype[t]=function(){var s=this._wrapped;return e.apply(s,arguments),"shift"!==t&&"splice"!==t||0!==s.length||delete s[0],H(this,s)}}),x.each(["concat","join","slice"],function(t){var e=h[t];x.prototype[t]=function(){return H(this,e.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this)},{}],3:[function(t,e,s){!function(t,e,s){"use strict";var i=function(t,e){return setTimeout(function(){var t=s["default"].EBus.getInstance();t.send(s["default"].stdout,"helloWorld"),e()},5e3),!0};Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i}(t,s,t("/Users/spuch/ws/bbjs/dist/system/os"))},{"/Users/spuch/ws/bbjs/dist/system/os":10}],4:[function(t,e,s){!function(t,e,s){"use strict";var i=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.remove=function(t){for(var e=this.length-1;e>=0;--e)this[e]===t&&this.splice(e,1)},e}(Array),r=function(t,e){var r=s["default"].EBus.getInstance(),n=function(){function t(){this.elist=new i,this.lastChild=null,this._html="",this.firstChild=null}return Object.defineProperty(t.prototype,"innerHTML",{get:function(){return this._html},set:function(t){""!=t&&(this._html=t,this.firstChild=new o(t,this))},enumerable:!0,configurable:!0}),t.prototype.appendChild=function(t){this.elist.indexOf(t)==-1&&(t.parent.firstChild=null,t.parent=this,this.elist.push(t),r.send(s["default"].stdout,t.text),this.lastChild=t)},t.prototype.removeChild=function(t){this.elist.remove(t),r.send(s["default"].stdout,"\b[J")},t}(),o=function(){function t(t,e){this.text=t,this.parent=e}return t}(),a={elist:new i,termElement:new n,getElementById:function(t){return this.termElement},createElement:function(t){return new n}},h={Element:n,document:a};setupEnvForTypeWriter(h);var c=typewriterStandalone,u=a.getElementById("typewriter"),l=c(u).withAccuracy(95).withMinimumSpeed(20).withMaximumSpeed(30).build(),f="p_system:/ visitor $ # ";return l.put(f).waitRange(500,1e3).type("welcome to 🔆picospuch's personal website🎉🎉🎉").put("\r\n").put(f).waitRange(1e3,1500).type("picospuch is a software developer,\r\n").put(f).waitRange(1e3,1500).type("and he likes popular and system technologies.").put("\r\n").put(f).wait(500).put("type 'help' to learn more.",function(){e()}),!0};Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r}(t,s,t("/Users/spuch/ws/bbjs/dist/system/os"))},{"/Users/spuch/ws/bbjs/dist/system/os":10}],5:[function(t,e,s){!function(t,e,s,i,r,n,o){"use strict";var a=function(){function t(){}return t.prototype.boot=function(){function t(){l.detachFromKeycode();var t=new s["default"].PBus("/applet/intro");new o.Task(n["default"],t,function(){l.attachToKeycode()});t.send("start")}function e(t){l.detachFromKeycode(),t.send(s["default"].stdout,"spuch\r\n");var e=new s["default"].PBus("/applet/helloWorld");new o.Task(r["default"],e,function(){l.attachToKeycode()});e.send("start")}function a(t){l.detachFromKeycode();var e="[31mintro[39m - about this site\r\n[31mblog[39m - goto picospuch's blog";t.send(s["default"].stdout,e),setTimeout(function(){l.attachToKeycode()},0)}function h(t){function e(){setTimeout(function(){t.send(s["default"].stdout,"="),e()},0)}l.detachFromKeycode(),e(),window.location=window.location.protocol+"//"+window.location.host+"/pblog/Index.html"}var c=this;this.eBus=s["default"].EBus.getInstance(),term.setRawMode(!0),term.on("data",function(t){for(var e,i=0;i<t.length;++i)e=t[i],c.eBus.send(s["default"].stdin,e)}),this.eBus.attach(s["default"].stdout,function(t){term.write(t)}),this.eBus.send(s["default"].stdout,"I'm 🔆Picospuch, Nice To Meet You!\r\n");var u="p_system:/ visitor $ ",l=new i.LineEdit(u);t(),l.attachToKeycode();var f=new s["default"].PBus("/main");this.eBus.attach("/lineedit/line",function(t){f.send("/lineedit/line",t)}),f.attach(s["default"].stdout,function(t){c.eBus.send(s["default"].stdout,t)}),f.attach("/lineedit/line",function(i){var r=i.trim();"test"==r?e(c.eBus):"intro"==r?t():"help"==r||"ls"==r?a(c.eBus):"blog"==r?h(c.eBus):"\n"!=i&&f.send(s["default"].stdout,"command not found!");
})},t}(),h=new a;window.main=h}(t,s,t("/Users/spuch/ws/bbjs/dist/system/os"),t("/Users/spuch/ws/bbjs/dist/libbb/lineedit"),t("./helloWorld"),t("./intro"),t("/Users/spuch/ws/bbjs/dist/system/task"))},{"./helloWorld":3,"./intro":4,"/Users/spuch/ws/bbjs/dist/libbb/lineedit":7,"/Users/spuch/ws/bbjs/dist/system/os":10,"/Users/spuch/ws/bbjs/dist/system/task":11}],6:[function(t,e,s){!function(t,e){"use strict";!function(t){t[t.UP=-2]="UP",t[t.DOWN=-3]="DOWN",t[t.RIGHT=-4]="RIGHT",t[t.LEFT=-5]="LEFT",t[t.HOME=-6]="HOME",t[t.END=-7]="END",t[t.INSERT=-8]="INSERT",t[t.DELETE=-9]="DELETE",t[t.PAGEUP=-10]="PAGEUP",t[t.PAGEDOWN=-11]="PAGEDOWN",t[t.CTRL_RIGHT=-68]="CTRL_RIGHT",t[t.CTRL_LEFT=-69]="CTRL_LEFT",t[t.ALT_RIGHT=-36]="ALT_RIGHT",t[t.ALT_LEFT=-37]="ALT_LEFT",t[t.CURSOR_POS=-256]="CURSOR_POS",t[t.BUFFER_SIZE=16]="BUFFER_SIZE"}(e.KEYCODE||(e.KEYCODE={}));e.KEYCODE}(t,s)},{}],7:[function(t,e,s){!function(t,e,s,i,r,n){"use strict";function o(t){if(t.length<1)return!1;var t=t[0];return/^[ \t]$/.test(t)}function a(t){if(t.length<1)return!1;var t=t[0];return/^[0-9a-z]$/.test(t)}function h(t){if(t.length<1)return!1;var t=t[0],e=t.charCodeAt(0);return e>=33&&e<=47||e>=58&&e<=64||e>=91&&e<=96||e>=123&&e<=126}function c(t){}function u(t){}function l(t,e,i){return s["default"].fgets(e,i,s["default"].stdin)?e.length:-1}var f=s["default"].stdin,p=s["default"].stdout;e.BB_isspace=o,e.BB_isalnum=a,e.BB_ispunct=h,e.BB_putchar=c;var d="",y=d+"[J",m="\0",b=function(){function t(){this.cmdedit_termw=80}return t}();new b;e.parse_and_put_prompt=u,e.read_line_input=l;var v=function(){function t(){}return t.prototype.isString=function(){return"string"==typeof this.key},t}(),g=function(){function t(t){void 0===t&&(t=""),this.maxsize=1e3,this.ss=0,this.pins=null,this.reset(),this.eBus=s["default"].EBus.getInstance(),this.prompt=t}return t.prototype.reset=function(){this.cursor=0,this.cmdedit_x=0,this.cmdedit_y=0,this.cmdedit_termw=80,this.command_len=0,this.cmdedit_prmt_len=0,this.command_ps=new n.CStringArray(1e3),this.buf=""},t.prototype.put_prompt=function(){if(this.prompt){this.cmdedit_prmt_len=this.prompt.length,this.eBus.send(p,"\r\n"+this.prompt),this.cursor=0;var t=this.cmdedit_termw;this.cmdedit_y=this.cmdedit_prmt_len/t,this.cmdedit_x=this.cmdedit_prmt_len%t}},t.prototype.send=function(t){this.eBus.send(p,t)},t.prototype.input_backspace=function(){this.cursor>0&&(this.input_backward(1),this.input_delete(0))},t.prototype.input_forward=function(){this.cursor<this.command_len&&this.put_cur_glyph_and_inc_cursor()},t.prototype.input_backward=function(t){t>this.cursor&&(t=this.cursor),0!=t&&(this.cursor-=t,this.cmdedit_x-=t,this.send(d+("["+t+"D")))},t.prototype.input_delete=function(t){var e=this.cursor;e!=this.command_len&&(this.command_ps.splice(e,1),this.command_len--,this.put_till_end_and_adv_cursor(),this.send(y),this.input_backward(this.cursor-e))},t.prototype.attachToChannnelChar=function(){var t=this;this.eBus.attach(f,function(e){t.read_line_input_simple(e)})},t.prototype.attachToKeycode=function(){this.ss=1,this.pins?(this.eBus.attachAll("/read_key/keycode",this.pins),this.pins=null):this.read_line_input(),this.eBus.send(s["default"].stdin,"\n")},t.prototype.detachFromKeycode=function(){this.pins=this.eBus.detachAll("/read_key/keycode"),this.ss=0,this.reset()},t.prototype.lineedit_read_key=function(t){var e=new v;return t<0?e.key=t:e.key=String.fromCharCode(t),e},t.prototype.put_till_end_and_adv_cursor=function(){for(;this.cursor<this.command_len;)this.put_cur_glyph_and_inc_cursor()},t.prototype.goto_new_line=function(){this.put_till_end_and_adv_cursor(),0!=this.cmdedit_x&&this.send("\r\n")},t.prototype.read_line_input=function(){var t,e,n=this;i.read_key(f,"/read_key/keycode"),this.eBus.attach("/read_key/keycode",function(t){var i=n.lineedit_read_key(t);i.isString()?console.log(s["default"].charToSymbol(i.key)):console.log(r.KEYCODE[i.key]),e(i)}),e=function(e){var s=0;switch(e.key){case"\n":case"\r":n.goto_new_line(),s=1;break;case"":n.input_backspace();break;case r.KEYCODE.LEFT:n.input_backward(1);break;case r.KEYCODE.RIGHT:n.input_forward();break;default:if(!e.isString())return;if(n.command_len++,n.cursor==n.command_len-1)n.command_ps[n.cursor]=e.key,n.command_ps[n.cursor+1]=m,n.put_cur_glyph_and_inc_cursor();else{var i=n.cursor;n.command_ps.splice(i,0,e.key),++i,n.put_till_end_and_adv_cursor(),n.input_backward(n.cursor-i)}}s>0&&(n.command_ps[n.command_len++]="\n",n.command_ps[n.command_len]=m,t=n.command_ps.toString(),n.eBus.send("/lineedit/line",t),1==n.ss&&n.put_prompt(),n.reset())}},t.prototype.ctrl_left=function(){},t.prototype.read_line_input_simple=function(t){this.buf+=t,"\n"==t&&(this.eBus.send(p,this.prompt),this.eBus.send("/lineedit/line",this.buf.slice()),this.buf="")},t.prototype.put_cur_glyph_and_inc_cursor=function(){var t=this.command_ps[this.cursor];if(t==m)t=" ";else{var e;this.cursor++,this.cmdedit_x++}e=this.cmdedit_x-this.cmdedit_termw,e<=0&&this.send(t),e>=0&&(this.send("\r\n"),this.cmdedit_y++,this.cmdedit_x=0)},t}();e.LineEdit=g}(t,s,t("/Users/spuch/ws/bbjs/dist/system/os"),t("/Users/spuch/ws/bbjs/dist/libbb/read_key"),t("/Users/spuch/ws/bbjs/dist/libbb/libbb"),t("/Users/spuch/ws/bbjs/dist/system/c"))},{"/Users/spuch/ws/bbjs/dist/libbb/libbb":6,"/Users/spuch/ws/bbjs/dist/libbb/read_key":8,"/Users/spuch/ws/bbjs/dist/system/c":9,"/Users/spuch/ws/bbjs/dist/system/os":10}],8:[function(t,e,s){!function(t,e,s,i){"use strict";function r(t,e){var r,n,o,a=s["default"].EBus.getInstance(),h=["O","A",128,i.KEYCODE.UP,"O","B",128,i.KEYCODE.DOWN,"O","C",128,i.KEYCODE.RIGHT,"O","D",128,i.KEYCODE.LEFT,"O","H",128,i.KEYCODE.HOME,"O","F",128,i.KEYCODE.END,"[","A",128,i.KEYCODE.UP,"[","B",128,i.KEYCODE.DOWN,"[","C",128,i.KEYCODE.RIGHT,"[","D",128,i.KEYCODE.LEFT,"[","H",128,i.KEYCODE.HOME,"[","F",128,i.KEYCODE.END,"[","1","~",128,i.KEYCODE.HOME,"[","2","~",128,i.KEYCODE.INSERT,"[","3","~",128,i.KEYCODE.DELETE,"[","4","~",128,i.KEYCODE.END,"[","5","~",128,i.KEYCODE.PAGEUP,"[","6","~",128,i.KEYCODE.PAGEDOWN,"[","7","~",128,i.KEYCODE.HOME,"[","8","~",128,i.KEYCODE.END,"[","1",";","5","C",128,i.KEYCODE.CTRL_RIGHT,"[","1",";","5","D",128,i.KEYCODE.CTRL_LEFT,"[","1",";","3","C",128,i.KEYCODE.ALT_RIGHT,"[","1",";","3","D",128,i.KEYCODE.ALT_LEFT,0],c=!1;a.attach(t,function(t){if(c){if(n>i.KEYCODE.BUFFER_SIZE)return void(c=!1);for(r[n++]=t;0!==h[o];)for(var s=0;;){if(n<=s)return;if(r[s]!=h[o+s]){for(o+=s;128!==h[o];)++o;o+=2;break}if(128===h[o+s+1])return c=!1,void a.send(e,h[o+s+2]);++s}return void(c=!1)}return""==t?(c=!0,n=0,o=0,void(r=new Array(i.KEYCODE.BUFFER_SIZE))):void a.send(e,t.charCodeAt(0))})}e.read_key=r}(t,s,t("/Users/spuch/ws/bbjs/dist/system/os"),t("/Users/spuch/ws/bbjs/dist/libbb/libbb"))},{"/Users/spuch/ws/bbjs/dist/libbb/libbb":6,"/Users/spuch/ws/bbjs/dist/system/os":10}],9:[function(t,e,s){!function(t,e){"use strict";var s=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),Object.defineProperty(e.prototype,"length",{get:function(){for(var t=0,e=0;"\0"!=this[e];++e)++t;return t},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.toString=function(){for(var t="",e=0;"\0"!=this[e]&&e<this.length;++e)t+=this[e];return t},e}(Array);e.CStringArray=s}(t,s)},{}],10:[function(t,e,s){!function(t,e,s,i){"use strict";var r;!function(t){function e(t,e){return e.write(t),1}function s(t,e,s){return""}t.stdin="/dev/tty:in",t.stdout="/dev/tty:out",t.fputs=e,t.fgets=s}(r||(r={}));var r;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.addListener=function(e,s){return t.prototype.addListener.call(this,e,s),this},e.prototype.on=function(e,s){return t.prototype.on.call(this,e,s),this},e.prototype.once=function(e,s){return t.prototype.once.call(this,e,s),this},e.prototype.removeListener=function(e,s){return t.prototype.removeListener.call(this,e,s),this},e.prototype.removeAllListeners=function(e){return t.prototype.removeAllListeners.call(this,e),this},e.prototype.setMaxListeners=function(e){return t.prototype.setMaxListeners.call(this,e),this},e.prototype.getMaxListeners=function(){var e=t.prototype.getMaxListeners.call(this);return e},e.prototype.listeners=function(e){var s=t.prototype.listeners.call(this,e);return s},e.prototype.emit=function(e){for(var s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];var r=t.prototype.emit.apply(this,[e].concat(s));return r},e.prototype.listenerCount=function(e){var s=t.prototype.listenerCount.call(this,e);return s},e}(s.EventEmitter),i=function(){function t(t){this.ebus=r.getInstance(),this.processName=t}return t.prototype.inherit=function(t,e){},t.prototype.attach=function(t,e){var s=this.processName+":"+t;this.ebus.attach(s,e)},t.prototype.detach=function(t,e){var s=this.processName+":"+t;this.ebus.detach(s,e)},t.prototype.send=function(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];var i=this.processName+":"+t;(r=this.ebus).send.apply(r,[i].concat(e));var r},t.prototype.attachAll=function(t,e){var s=this.processName+":"+t;this.ebus.attachAll(s,e)},t.prototype.detachAll=function(t){var e=this.processName+":"+t;return this.ebus.detachAll(e)},t}();t.PBus=i;var r=function(){function t(t){if("getInstance"!=t)throw new Error("singleton");this.ef=new e}return t.getInstance=function(){return t._instance||(t._instance=new t("getInstance")),t._instance},t.prototype.attach=function(t,e){var s="ebus:"+t;this.ef.addListener(s,e)},t.prototype.detach=function(t,e){var s="ebus:"+t;this.ef.removeListener(s,e)},t.prototype.attachAll=function(t,e){for(var s="ebus:"+t,i=0,r=e;i<r.length;i++){var n=r[i];this.ef.addListener(s,n)}},t.prototype.detachAll=function(t){var e="ebus:"+t,s=this.ef.listeners(e);return this.ef.removeAllListeners(e),s},t.prototype.send=function(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];var i="ebus:"+t,r=e.slice();r.splice(0,0,[i]),this.ef.emit.apply(this.ef,r)},t}();t.EBus=r}(r||(r={}));var r,n=["nul","soh","stx","etx","eot","enq","ack","bel","bs","ht","nl","vt","np","cr","so","si","dle","dc1","dc2","dc3","dc4","nak","syn","etb","can","em","sub","esc","fs","gs","rs","us","sp","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","","}","~","del"];!function(t){function e(t){return n[t.charCodeAt(0)]}function s(t){return i.map(t,function(t){"undefined"==typeof t&&(t="\0");var s=e(t);return s.length>1?"["+e(t)+"]":s}).join("")}t.charToSymbol=e,t.stringToSymbolString=s}(r||(r={})),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r}(t,s,t("events"),t("underscore"),t("ts-helpers"))},{events:1,"ts-helpers":12,underscore:2}],11:[function(t,e,s){!function(t,e){"use strict";var s=function(){function t(t,e,s){t(e,s)}return t.prototype.start=function(){this.pbus.send("task:start")},t.prototype.end=function(){this.pbus.send("task:end")},t}();e.Task=s}(t,s)},{}],12:[function(t,e,s){(function(t){function e(t){for(var e,s=1,i=arguments.length;s<i;s++){e=arguments[s];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}function s(t,e){function s(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}function i(t,e,s,i){var r,n=arguments.length,o=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(n<3?r(o):n>3?r(e,s,o):r(e,s))||o);return n>3&&o&&Object.defineProperty(e,s,o),o}function r(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function n(t,e){return function(s,i){e(s,i,t)}}function o(t,e,s,i){return new(s||(s=Promise))(function(r,n){function o(t){try{h(i.next(t))}catch(e){n(e)}}function a(t){try{h(i["throw"](t))}catch(e){n(e)}}function h(t){t.done?r(t.value):new s(function(e){e(t.value)}).then(o,a)}h((i=i.apply(t,e)).next())})}!function(t){t.__assign=t&&t.__assign||Object.assign||e,t.__extends=t&&t.__extends||s,t.__decorate=t&&t.__decorate||i,t.__metadata=t&&t.__metadata||r,t.__param=t&&t.__param||n,t.__awaiter=t&&t.__awaiter||o}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:"undefined"!=typeof t?t:Function("return this;")())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[5]);